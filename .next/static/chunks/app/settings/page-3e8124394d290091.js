(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{9294:function(e,s,i){Promise.resolve().then(i.bind(i,1843))},1843:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return f}});var n=i(9659),a=i(3330),l=i(9059),r=i(8667),c=i(2448),t=i(4495);let o={ORDER_UPDATE:{label:"Order Updates",description:"Updates about your orders and purchases"},MESSAGE:{label:"Messages",description:"New messages from other users"},BOOKING_CONFIRMATION:{label:"Booking Confirmations",description:"Service booking confirmations"},DEAL_CLOSED:{label:"Deal Closed",description:"When a deal is completed"},ADMIN_ALERT:{label:"Admin Alerts",description:"Important system announcements"},PROMOTION:{label:"Promotions",description:"Special offers and promotions"},PAYMENT_RECEIVED:{label:"Payment Received",description:"When you receive payments"},PAYMENT_SENT:{label:"Payment Sent",description:"When you send payments"},SHIPPING_UPDATE:{label:"Shipping Updates",description:"Updates about shipping and delivery"},REVIEW_REQUEST:{label:"Review Requests",description:"Requests to review purchases"},LISTING_APPROVED:{label:"Listing Approved",description:"When your listings are approved"},LISTING_REJECTED:{label:"Listing Rejected",description:"When your listings are rejected"},VENDOR_APPROVED:{label:"Vendor Approved",description:"When your vendor application is approved"},VENDOR_REJECTED:{label:"Vendor Rejected",description:"When your vendor application is rejected"},SERVICE_BOOKING:{label:"Service Bookings",description:"New service booking requests"},GROUP_BUY_UPDATE:{label:"Group Buy Updates",description:"Updates about group buying opportunities"},SECURITY_ALERT:{label:"Security Alerts",description:"Important security notifications"},WELCOME:{label:"Welcome Messages",description:"Welcome and onboarding messages"},PASSWORD_RESET:{label:"Password Reset",description:"Password reset notifications"},EMAIL_VERIFICATION:{label:"Email Verification",description:"Email verification requests"}},d={EMAIL:{label:"Email",description:"Receive notifications via email"},SMS:{label:"SMS",description:"Receive notifications via text message"},PUSH:{label:"Push",description:"Receive push notifications on your device"},IN_APP:{label:"In-App",description:"Show notifications within the app"}};function u(e){let{userId:s}=e,[i,r]=(0,a.useState)([]),[c,t]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1);(0,a.useEffect)(()=>{m()},[s]);let m=async()=>{try{let e=await fetch("/api/user/notification-preferences?userId=".concat(s));if(e.ok){let s=await e.json();r(s)}}catch(e){console.error("Error loading notification preferences:",e)}finally{t(!1)}},x=(e,s,i)=>{r(n=>n.find(i=>i.type===e&&i.channel===s)?n.map(n=>n.type===e&&n.channel===s?{...n,enabled:i}:n):[...n,{type:e,channel:s,enabled:i}])},p=async()=>{h(!0);try{(await fetch("/api/user/notification-preferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:s,preferences:i.map(e=>({type:e.type,channel:e.channel,enabled:e.enabled}))})})).ok?console.log("Preferences saved successfully"):console.error("Failed to save preferences")}catch(e){console.error("Error saving preferences:",e)}finally{h(!1)}},j=(e,s)=>{let n=i.find(i=>i.type===e&&i.channel===s);return!n||n.enabled},f={"Orders & Payments":["ORDER_UPDATE","PAYMENT_RECEIVED","PAYMENT_SENT","SHIPPING_UPDATE"],"Messages & Communication":["MESSAGE","BOOKING_CONFIRMATION","SERVICE_BOOKING"],"Listings & Vendors":["LISTING_APPROVED","LISTING_REJECTED","VENDOR_APPROVED","VENDOR_REJECTED"],"Security & Account":["SECURITY_ALERT","WELCOME","PASSWORD_RESET","EMAIL_VERIFICATION"],"Promotions & Updates":["PROMOTION","ADMIN_ALERT","GROUP_BUY_UPDATE","REVIEW_REQUEST","DEAL_CLOSED"]};return c?(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Notification Settings"}),(0,n.jsx)(l.SZ,{children:"Loading your notification preferences..."})]}),(0,n.jsx)(l.aY,{children:(0,n.jsx)("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"},s))})})]}):(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Notification Settings"}),(0,n.jsx)(l.SZ,{children:"Choose how you want to be notified about different activities on Ciuna."})]}),(0,n.jsxs)(l.aY,{children:[(0,n.jsxs)(l.mQ,{defaultValue:"email",className:"w-full",children:[(0,n.jsxs)(l.dr,{className:"grid w-full grid-cols-4",children:[(0,n.jsx)(l.SP,{value:"email",children:"Email"}),(0,n.jsx)(l.SP,{value:"push",children:"Push"}),(0,n.jsx)(l.SP,{value:"sms",children:"SMS"}),(0,n.jsx)(l.SP,{value:"inapp",children:"In-App"})]}),Object.entries(d).map(e=>{let[s,i]=e;return(0,n.jsx)(l.nU,{value:s.toLowerCase(),children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{className:"text-lg font-medium",children:[i.label," Notifications"]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:i.description})]}),Object.entries(f).map(e=>{let[i,a]=e;return(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h4",{className:"font-medium text-gray-900",children:i}),(0,n.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"font-medium text-sm",children:o[e].label}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:o[e].description})]}),(0,n.jsx)(l.rs,{checked:j(e,s),onCheckedChange:i=>x(e,s,i)})]},e))})]},i)})]})},s)})]}),(0,n.jsx)("div",{className:"flex justify-end mt-6 pt-6 border-t",children:(0,n.jsx)(l.zx,{onClick:p,disabled:u,className:"min-w-[120px]",children:u?"Saving...":"Save Changes"})})]})]})}var h=i(1097),m=i(6604),x=i(7266),p=i(4317);let j=(0,i(8136).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);function f(){let{user:e}=(0,h.a)(),{userPreferences:s,updateUserPreferences:i,isLoading:o}=(0,r.QT)(),[d,f]=(0,a.useState)(!1),[y,g]=(0,a.useState)(null),v=async e=>{try{f(!0),g(null),await i(e),g({type:"success",text:"Settings saved successfully!"})}catch(e){console.error("Error saving preferences:",e),g({type:"error",text:"Failed to save settings. Please try again."})}finally{f(!1)}},N=async e=>{await v({timezone:e})},b=async e=>{await v({date_format:e})},E=async e=>{await v({time_format:e})};return e?(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,n.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your account preferences and settings."})]}),y&&(0,n.jsx)("div",{className:"mb-6 p-4 rounded-md ".concat("success"===y.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:y.text}),(0,n.jsxs)(l.mQ,{defaultValue:"general",className:"w-full",children:[(0,n.jsxs)(l.dr,{className:"grid w-full grid-cols-4",children:[(0,n.jsxs)(l.SP,{value:"general",className:"flex items-center space-x-2",children:[(0,n.jsx)(m.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"General"})]}),(0,n.jsxs)(l.SP,{value:"language",className:"flex items-center space-x-2",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Language"})]}),(0,n.jsxs)(l.SP,{value:"currency",className:"flex items-center space-x-2",children:[(0,n.jsx)(p.Z,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Currency"})]}),(0,n.jsxs)(l.SP,{value:"notifications",className:"flex items-center space-x-2",children:[(0,n.jsx)(j,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Notifications"})]})]}),(0,n.jsx)(l.nU,{value:"general",className:"space-y-6",children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Account Information"}),(0,n.jsx)(l.SZ,{children:"Your basic account details and preferences."})]}),(0,n.jsx)(l.aY,{className:"space-y-6",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),(0,n.jsxs)("select",{value:(null==s?void 0:s.timezone)||"UTC",onChange:e=>N(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"UTC",children:"UTC"}),(0,n.jsx)("option",{value:"Europe/Moscow",children:"Moscow (UTC+3)"}),(0,n.jsx)("option",{value:"Europe/London",children:"London (UTC+0)"}),(0,n.jsx)("option",{value:"America/New_York",children:"New York (UTC-5)"}),(0,n.jsx)("option",{value:"America/Los_Angeles",children:"Los Angeles (UTC-8)"}),(0,n.jsx)("option",{value:"Asia/Tokyo",children:"Tokyo (UTC+9)"}),(0,n.jsx)("option",{value:"Asia/Shanghai",children:"Shanghai (UTC+8)"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),(0,n.jsxs)("select",{value:(null==s?void 0:s.date_format)||"MM/DD/YYYY",onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),(0,n.jsx)("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),(0,n.jsx)("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),(0,n.jsxs)("select",{value:(null==s?void 0:s.time_format)||"12h",onChange:e=>E(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,n.jsx)("option",{value:"12h",children:"12-hour (AM/PM)"}),(0,n.jsx)("option",{value:"24h",children:"24-hour"})]})]})]})})]})}),(0,n.jsx)(l.nU,{value:"language",className:"space-y-6",children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Language Preferences"}),(0,n.jsx)(l.SZ,{children:"Choose your preferred language for the interface."})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Language"}),(0,n.jsx)(c.Z,{variant:"inline",showFlag:!0,showNativeName:!0,className:"justify-start"})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsx)("p",{children:"Your language preference affects:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,n.jsx)("li",{children:"Interface text and labels"}),(0,n.jsx)("li",{children:"Date and time formatting"}),(0,n.jsx)("li",{children:"Number formatting"}),(0,n.jsx)("li",{children:"Currency display"})]})]})]})})]})}),(0,n.jsx)(l.nU,{value:"currency",className:"space-y-6",children:(0,n.jsxs)(l.Zb,{children:[(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Currency Preferences"}),(0,n.jsx)(l.SZ,{children:"Set your preferred currency for price display."})]}),(0,n.jsx)(l.aY,{children:(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Currency"}),(0,n.jsx)(t.ZP,{variant:"inline",showSymbol:!0,className:"justify-start"})]}),(0,n.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,n.jsx)("p",{children:"Your currency preference affects:"}),(0,n.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[(0,n.jsx)("li",{children:"Price display throughout the platform"}),(0,n.jsx)("li",{children:"Payment processing"}),(0,n.jsx)("li",{children:"Financial reports and analytics"})]})]})]})})]})}),(0,n.jsx)(l.nU,{value:"notifications",className:"space-y-6",children:(0,n.jsx)(u,{userId:e.id})})]})]})}):(0,n.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,n.jsx)(l.Zb,{className:"w-full max-w-md",children:(0,n.jsxs)(l.Ol,{children:[(0,n.jsx)(l.ll,{children:"Access Denied"}),(0,n.jsx)(l.SZ,{children:"Please sign in to access settings."})]})})})}},4317:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(8136).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},7266:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(8136).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},6604:function(e,s,i){"use strict";i.d(s,{Z:function(){return n}});let n=(0,i(8136).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}},function(e){e.O(0,[584,782,750,70,982,642,526,560],function(){return e(e.s=9294)}),_N_E=e.O()}]);