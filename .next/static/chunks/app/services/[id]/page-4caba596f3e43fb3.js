(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[950],{6474:function(e,s,t){Promise.resolve().then(t.bind(t,1265))},1265:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return p}});var a=t(9659),r=t(3330),i=t(9584),n=t(1922),l=t(9059),c=t(1124),d=t(5076),o=t(7835),m=t(9198),x=t(3344),u=t(5113),h=t(4765),g=t(4660),j=t(3070),f=t(4535);function p(){let e=(0,i.useParams)(),s=(0,i.useRouter)(),t=e.id,[p,v]=(0,r.useState)(null),[y,N]=(0,r.useState)([]),[b,w]=(0,r.useState)(!0),[k,Z]=(0,r.useState)(""),[_,S]=(0,r.useState)(""),[P,M]=(0,r.useState)(""),[C,D]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&E()},[t]);let E=async()=>{try{w(!0);let[e,s]=await Promise.all([j.db.services.getById(parseInt(t)),j.db.bookings.getAll({service_id:parseInt(t)},1,10)]);v(e),N(s.data)}catch(e){console.error("Error loading service data:",e)}finally{w(!1)}},T=async()=>{if(k&&_&&p){D(!0);try{let e=new Date("".concat(k,"T").concat(_)),t={service_id:p.id,client_id:"current-user-id",scheduled_at:e.toISOString(),status:"PENDING",escrow_status:"HELD",notes:P,duration_minutes:p.duration_minutes,total_amount_rub:p.price_rub,escrow_amount_rub:p.price_rub,requirements:p.requirements,deliverables:p.deliverables,cancellation_policy:p.cancellation_policy||"Standard cancellation policy",meeting_location:p.is_online?"Online":"TBD",is_online:p.is_online,is_in_person:!p.is_online},a=await j.db.bookings.create(t);s.push("/bookings/".concat(a.id))}catch(e){console.error("Error creating booking:",e)}finally{D(!1)}}};return b?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-4",children:[(0,a.jsx)("div",{className:"h-64 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]}),(0,a.jsx)("div",{className:"h-96 bg-gray-200 rounded"})]})]})}):p?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:p.title}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,a.jsx)(l.Ct,{variant:"outline",children:"Service"}),(0,a.jsxs)(l.Ct,{variant:"success",className:"bg-green-500",children:[(0,a.jsx)(c.Z,{className:"h-3 w-3 mr-1"}),"Verified Provider"]})]})]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(l.zx,{variant:"outline",size:"sm",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Save"]}),(0,a.jsxs)(l.zx,{variant:"outline",size:"sm",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Message"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-600 mb-4",children:[(0,a.jsx)(m.Z,{className:"h-5 w-5 mr-2"}),(0,a.jsx)("span",{children:p.is_online?"Online":"In-person"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-yellow-500 mr-1"}),(0,a.jsx)("span",{className:"font-semibold",children:"4.5"}),(0,a.jsx)("span",{className:"text-gray-600 ml-1",children:"(0 reviews)"})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(u.Z,{className:"h-5 w-5 text-gray-500 mr-1"}),(0,a.jsxs)("span",{children:[p.duration_minutes," minutes"]})]}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(h.Z,{className:"h-5 w-5 text-gray-500 mr-1"}),(0,a.jsxs)("span",{children:["Max ",p.max_participants," participants"]})]})]})]}),(0,a.jsx)(l.Zb,{className:"mb-8",children:(0,a.jsxs)(l.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About this service"}),(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed mb-6",children:p.description}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"What's included"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Professional consultation"]}),(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Follow-up support"]}),(0,a.jsxs)("li",{className:"flex items-center",children:[(0,a.jsx)(g.Z,{className:"h-4 w-4 text-green-500 mr-2"}),"Documentation provided"]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Requirements"}),(0,a.jsxs)("ul",{className:"space-y-2 text-gray-700",children:[(0,a.jsx)("li",{children:"• Valid identification"}),(0,a.jsx)("li",{children:"• Relevant documents"}),(0,a.jsx)("li",{children:"• 24-hour advance booking"})]})]})]})]})}),(0,a.jsx)(l.Zb,{className:"mb-8",children:(0,a.jsxs)(l.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"About the provider"}),(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,a.jsx)(l.qE,{src:void 0,fallback:"P",size:"lg"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Provider"}),(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:"Professional service provider"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 text-yellow-500 mr-1"}),(0,a.jsx)("span",{className:"font-medium",children:"4.5"}),(0,a.jsx)("span",{className:"text-gray-600 ml-1",children:"(0 reviews)"})]}),(0,a.jsx)("div",{className:"text-gray-600",children:"0 completed bookings"})]})]})]})]})}),(0,a.jsx)(l.Zb,{children:(0,a.jsxs)(l.aY,{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Reviews"}),(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No reviews yet. Be the first to review this service!"})]})]})})]}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(l.Zb,{className:"sticky top-8",children:(0,a.jsxs)(l.aY,{className:"p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:(0,f.T4)(p.price_rub)}),(0,a.jsx)("div",{className:"text-gray-600",children:"per session"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Date"}),(0,a.jsx)("input",{type:"date",value:k,onChange:e=>Z(e.target.value),min:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),k&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Time"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:(e=>{let s=y.filter(s=>s.scheduled_at.startsWith(e)&&"CANCELLED"!==s.status).map(e=>new Date(e.scheduled_at).toTimeString().slice(0,5));return["09:00","10:00","11:00","14:00","15:00","16:00","17:00"].filter(e=>!s.includes(e))})(k).map(e=>(0,a.jsx)("button",{onClick:()=>S(e),className:"px-3 py-2 text-sm rounded-md border ".concat(_===e?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Requests (Optional)"}),(0,a.jsx)(l.gx,{value:P,onChange:e=>M(e.target.value),placeholder:"Any special requirements or notes...",rows:3})]}),(0,a.jsx)(l.zx,{onClick:T,disabled:!k||!_||C,className:"w-full",children:C?"Booking...":"Book Now"}),(0,a.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center mb-2",children:[(0,a.jsx)(c.Z,{className:"h-4 w-4 text-green-500 mr-1"}),(0,a.jsx)("span",{children:"Protected by escrow"})]}),(0,a.jsx)("p",{children:"Payment held until service completion"})]})]})]})})})]})}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Service not found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"The service you're looking for doesn't exist."}),(0,a.jsx)(l.zx,{asChild:!0,children:(0,a.jsx)(n.default,{href:"/services",children:"Browse All Services"})})]})}},4535:function(e,s,t){"use strict";t.d(s,{SY:function(){return c},T4:function(){return l},cn:function(){return n}});var a=t(7833),r=t(1128),i=t(2597);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RUB";return(0,i.xG)(e,s)}function c(e){let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3);if(t<60)return"Just now";let a=Math.floor(t/60);if(a<60)return"".concat(a,"m ago");let r=Math.floor(a/60);if(r<24)return"".concat(r,"h ago");let i=Math.floor(r/24);return i<7?"".concat(i,"d ago"):i<30?"".concat(Math.floor(i/7),"w ago"):i<365?"".concat(Math.floor(i/30),"mo ago"):"".concat(Math.floor(i/365),"y ago")}},4660:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5113:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},5076:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},9198:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},7835:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},1124:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},3344:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]])},4765:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9584:function(e,s,t){"use strict";var a=t(8569);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[584,782,922,750,70,642,526,560],function(){return e(e.s=6474)}),_N_E=e.O()}]);