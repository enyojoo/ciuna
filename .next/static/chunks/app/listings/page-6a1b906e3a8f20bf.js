(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[311],{7996:function(e,s,t){Promise.resolve().then(t.bind(t,6385))},6385:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var r=t(9659),a=t(3330),l=t(9584),n=t(1922),i=t(7066),c=t(9059),o=t(8754),d=t(930),u=t(9198),x=t(230),m=t(5076),h=t(3070),g=t(4535);function f(){let e=(0,l.useSearchParams)(),[s,t]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[j,v]=(0,a.useState)({search:e.get("search")||"",city:e.get("city")||"",category_id:e.get("category")||void 0}),[p,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{y(!0);let{data:e}=await h.db.listings.getAll(j,1,20);t(e)}catch(e){console.error("Error loading listings:",e)}finally{y(!1)}})()},[j]);let b=(e,s)=>{v(t=>({...t,[e]:s}))};return f?(0,r.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:12}).map((e,s)=>(0,r.jsxs)("div",{className:"animate-pulse",children:[(0,r.jsx)("div",{className:"bg-gray-200 rounded-lg h-48 mb-4"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"bg-gray-200 rounded h-4"}),(0,r.jsx)("div",{className:"bg-gray-200 rounded h-4 w-3/4"}),(0,r.jsx)("div",{className:"bg-gray-200 rounded h-6 w-1/2"})]})]},s))})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Browse Listings"}),(0,r.jsx)("p",{className:"text-lg text-gray-600",children:"Discover amazing products from fellow expats and local vendors"})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault();let s=new FormData(e.target).get("search");v(e=>({...e,search:s}))},className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,r.jsx)(c.II,{name:"search",placeholder:"Search for products...",defaultValue:j.search,className:"pl-10"})]})}),(0,r.jsxs)(c.zx,{variant:"outline",onClick:()=>N(!p),className:"lg:hidden",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),p&&(0,r.jsx)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),(0,r.jsxs)("select",{value:j.city||"",onChange:e=>b("city",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Cities"}),(0,r.jsx)("option",{value:"Moscow",children:"Moscow"}),(0,r.jsx)("option",{value:"St. Petersburg",children:"St. Petersburg"}),(0,r.jsx)("option",{value:"Novosibirsk",children:"Novosibirsk"}),(0,r.jsx)("option",{value:"Yekaterinburg",children:"Yekaterinburg"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Condition"}),(0,r.jsxs)("select",{value:j.condition||"",onChange:e=>b("condition",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Conditions"}),(0,r.jsx)("option",{value:"NEW",children:"New"}),(0,r.jsx)("option",{value:"LIKE_NEW",children:"Like New"}),(0,r.jsx)("option",{value:"GOOD",children:"Good"}),(0,r.jsx)("option",{value:"FAIR",children:"Fair"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(c.II,{type:"number",placeholder:"Min",value:j.min_price||"",onChange:e=>b("min_price",e.target.value?parseInt(e.target.value):void 0),className:"flex-1"}),(0,r.jsx)(c.II,{type:"number",placeholder:"Max",value:j.max_price||"",onChange:e=>b("max_price",e.target.value?parseInt(e.target.value):void 0),className:"flex-1"})]})]})]})})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("p",{className:"text-gray-600",children:[s.length," listings found"]})}),0===s.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDD0D"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No listings found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Try adjusting your search criteria or browse all listings"}),(0,r.jsx)(c.zx,{asChild:!0,children:(0,r.jsx)(n.default,{href:"/listings",children:"Browse All Listings"})})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(e=>(0,r.jsx)(n.default,{href:"/listings/".concat(e.id),children:(0,r.jsxs)(c.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer group",children:[(0,r.jsxs)("div",{className:"relative",children:[e.photo_urls&&e.photo_urls.length>0?(0,r.jsx)(i.default,{src:e.photo_urls[0],alt:e.title,width:400,height:300,className:"w-full h-48 object-cover rounded-t-lg"}):(0,r.jsx)("div",{className:"w-full h-48 bg-gray-200 rounded-t-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-gray-400 text-4xl",children:"\uD83D\uDCE6"})}),(0,r.jsx)("div",{className:"absolute top-2 right-2",children:(0,r.jsx)(c.Ct,{variant:"secondary",className:"bg-white/90 text-gray-900",children:e.condition})})]}),(0,r.jsxs)(c.aY,{className:"p-4",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mb-2",children:[(0,r.jsx)(u.Z,{className:"h-4 w-4 mr-1"}),e.city,e.district&&", ".concat(e.district)]}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:(0,g.T4)(e.price_rub)}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 mr-1"}),e.view_count]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(m.Z,{className:"h-4 w-4 mr-1"}),e.favorite_count]})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,r.jsx)("span",{children:"by Unknown Seller"}),(0,r.jsx)("span",{children:(0,g.SY)(e.created_at)})]})]})]})},e.id))})]})}},4535:function(e,s,t){"use strict";t.d(s,{SY:function(){return c},T4:function(){return i},cn:function(){return n}});var r=t(7833),a=t(1128),l=t(2597);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,a.m6)((0,r.W)(s))}function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RUB";return(0,l.xG)(e,s)}function c(e){let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3);if(t<60)return"Just now";let r=Math.floor(t/60);if(r<60)return"".concat(r,"m ago");let a=Math.floor(r/60);if(a<24)return"".concat(a,"h ago");let l=Math.floor(a/24);return l<7?"".concat(l,"d ago"):l<30?"".concat(Math.floor(l/7),"w ago"):l<365?"".concat(Math.floor(l/30),"mo ago"):"".concat(Math.floor(l/365),"y ago")}},230:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8136).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},5076:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8136).Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},8754:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8136).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},930:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});let r=(0,t(8136).Z)("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]])},9584:function(e,s,t){"use strict";var r=t(8569);t.o(r,"useParams")&&t.d(s,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(s,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(s,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[584,782,922,842,750,70,642,526,560],function(){return e(e.s=7996)}),_N_E=e.O()}]);