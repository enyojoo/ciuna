(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[74],{5371:function(e,t,r){Promise.resolve().then(r.bind(r,6236))},6236:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var s=r(9659),a=r(3330),n=r(9059),i=r(3070),l=r(1097),c=r(8667),d=r(1675),o=r(6735);let u=(0,r(8136).Z)("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var h=r(2166),x=r(4660),m=r(9201),y=r(5113),p=r(3762),f=r(9722),g=r(1943),v=r(6672);let j={YOOMONEY:d.Z,STRIPE:o.Z,CASH:u,BANK_TRANSFER:h.Z},N={CARD:o.Z,BANK_ACCOUNT:h.Z,WALLET:d.Z,CASH:u,CRYPTO:o.Z};function w(){let{user:e}=(0,l.a)(),{formatPrice:t}=(0,c.QT)(),[r,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)([]),[w,C]=(0,a.useState)([]),[k,Z]=(0,a.useState)([]),[_,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{e&&b()},[e]);let b=async()=>{if(e)try{d(!0);let[t,r,s]=await Promise.all([i.te.getPaymentMethods(e.id),i.te.getUserTransactions(e.id,20),i.te.getProviders()]);h(t),C(r),Z(s)}catch(e){console.error("Error loading payment data:",e)}finally{d(!1)}},P=async t=>{if(e)try{await i.te.setDefaultPaymentMethod(e.id,t)&&await b()}catch(e){console.error("Error setting default payment method:",e)}},S=async t=>{if(e&&confirm("Are you sure you want to delete this payment method?"))try{console.log("Delete payment method:",t),await b()}catch(e){console.error("Error deleting payment method:",e)}},D=e=>{switch(e){case"COMPLETED":return(0,s.jsx)(x.Z,{className:"h-4 w-4 text-green-600"});case"FAILED":case"CANCELLED":return(0,s.jsx)(m.Z,{className:"h-4 w-4 text-red-600"});case"PROCESSING":return(0,s.jsx)(y.Z,{className:"h-4 w-4 text-blue-600"});default:return(0,s.jsx)(y.Z,{className:"h-4 w-4 text-yellow-600"})}},M=e=>{switch(e){case"COMPLETED":return(0,s.jsx)(n.Ct,{className:"bg-green-100 text-green-800",children:"Completed"});case"FAILED":return(0,s.jsx)(n.Ct,{className:"bg-red-100 text-red-800",children:"Failed"});case"CANCELLED":return(0,s.jsx)(n.Ct,{className:"bg-gray-100 text-gray-800",children:"Cancelled"});case"PROCESSING":return(0,s.jsx)(n.Ct,{className:"bg-blue-100 text-blue-800",children:"Processing"});case"PENDING":return(0,s.jsx)(n.Ct,{className:"bg-yellow-100 text-yellow-800",children:"Pending"});default:return(0,s.jsx)(n.Ct,{className:"bg-gray-100 text-gray-800",children:e})}},A=e=>{let t=j[e]||o.Z;return(0,s.jsx)(t,{className:"h-4 w-4"})},T=e=>{let t=N[e]||o.Z;return(0,s.jsx)(t,{className:"h-4 w-4"})},O=e=>{let t=k.find(t=>t.id===e);return(null==t?void 0:t.display_name)||"Unknown Provider"};return e?r?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,s.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Payment Settings"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Manage your payment methods and view transaction history."})]}),(0,s.jsxs)(n.mQ,{defaultValue:"methods",className:"w-full",children:[(0,s.jsxs)(n.dr,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(n.SP,{value:"methods",children:"Payment Methods"}),(0,s.jsx)(n.SP,{value:"transactions",children:"Transactions"})]}),(0,s.jsxs)(n.nU,{value:"methods",className:"space-y-6",children:[(0,s.jsxs)(n.Zb,{children:[(0,s.jsx)(n.Ol,{children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(n.ll,{children:"Payment Methods"}),(0,s.jsx)(n.SZ,{children:"Manage your saved payment methods for faster checkout."})]}),(0,s.jsxs)(n.zx,{onClick:()=>E(!0),children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Add Method"]})]})}),(0,s.jsx)(n.aY,{children:0===u.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(o.Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No payment methods"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Add a payment method to make checkout faster and easier."}),(0,s.jsxs)(n.zx,{onClick:()=>E(!0),children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Add Your First Method"]})]}):(0,s.jsx)("div",{className:"space-y-4",children:u.map(e=>{var t,r;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[T(e.method_type),A((null===(t=k.find(t=>t.id===e.provider_id))||void 0===t?void 0:t.provider_type)||"")]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"CARD"===e.method_type?"Card":"BANK_ACCOUNT"===e.method_type?"Bank Account":"WALLET"===e.method_type?"Digital Wallet":"CASH"===e.method_type?"Cash":"CRYPTO"===e.method_type?"Cryptocurrency":e.method_type}),e.is_default&&(0,s.jsx)(n.Ct,{variant:"secondary",className:"text-xs",children:"Default"}),e.is_verified&&(0,s.jsx)(x.Z,{className:"h-4 w-4 text-green-600"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:O(e.provider_id)}),(null===(r=e.metadata)||void 0===r?void 0:r.last4)&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["•••• ",e.metadata.last4]}),e.expires_at&&(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Expires ",new Date(e.expires_at).toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[!e.is_default&&(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>P(e.id),children:"Set Default"}),(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>console.log("Edit method:",e.id),children:(0,s.jsx)(f.Z,{className:"h-4 w-4"})}),(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>S(e.id),children:(0,s.jsx)(g.Z,{className:"h-4 w-4"})})]})]},e.id)})})})]}),(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Supported Payment Providers"}),(0,s.jsx)(n.SZ,{children:"We support multiple payment providers for your convenience."})]}),(0,s.jsx)(n.aY,{children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-3 p-4 border rounded-lg",children:[A(e.provider_type),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.display_name}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.supported_currencies.join(", ")})]})]},e.id))})})]})]}),(0,s.jsx)(n.nU,{value:"transactions",className:"space-y-6",children:(0,s.jsxs)(n.Zb,{children:[(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Transaction History"}),(0,s.jsx)(n.SZ,{children:"View your recent payment transactions and their status."})]}),(0,s.jsx)(n.aY,{children:0===w.length?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(o.Z,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No transactions yet"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Your payment transactions will appear here."})]}):(0,s.jsx)("div",{className:"space-y-4",children:w.map(e=>{var r;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[D(e.status),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"font-medium",children:"PAYMENT"===e.transaction_type?"Payment":"REFUND"===e.transaction_type?"Refund":"CHARGEBACK"===e.transaction_type?"Chargeback":"DISPUTE"===e.transaction_type?"Dispute":"TRANSFER"===e.transaction_type?"Transfer":e.transaction_type}),M(e.status)]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:t(e.amount,e.currency_code)}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleString()}),e.provider_transaction_id&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 font-mono",children:["ID: ",e.provider_transaction_id]})]})]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(null===(r=e.provider_response)||void 0===r?void 0:r.payment_url)&&(0,s.jsx)(n.zx,{variant:"outline",size:"sm",onClick:()=>window.open(e.provider_response.payment_url,"_blank"),children:(0,s.jsx)(v.Z,{className:"h-4 w-4"})})})]},e.id)})})})]})})]})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(n.Zb,{className:"w-full max-w-md",children:(0,s.jsxs)(n.Ol,{children:[(0,s.jsx)(n.ll,{children:"Access Denied"}),(0,s.jsx)(n.SZ,{children:"Please sign in to access payment settings."})]})})})}},8667:function(e,t,r){"use strict";r.d(t,{QT:function(){return c},ZK:function(){return d},bd:function(){return l}});var s=r(9659),a=r(3330),n=r(3070);let i=(0,a.createContext)(void 0);function l(e){let{children:t,userId:r,defaultLanguage:l="en"}=e,[c,d]=(0,a.useState)(l),[o,u]=(0,a.useState)([]),[h,x]=(0,a.useState)(null),[m,y]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{g()},[r]),(0,a.useEffect)(()=>{(null==h?void 0:h.preferred_language)&&d(h.preferred_language)},[h]);let g=async()=>{try{y(!0);let e=await n.Dp.getLanguages();if(u(e),r){let e=await n.Dp.getUserPreferences(r);x(e),(null==e?void 0:e.preferred_language)&&d(e.preferred_language)}}catch(e){console.error("Error loading i18n data:",e)}finally{y(!1)}},v=async e=>{if(r)try{if(f(!0),await n.Dp.updateUserPreferences(r,e)){let e=await n.Dp.getUserPreferences(r);x(e)}}catch(e){console.error("Error updating user preferences:",e)}finally{f(!1)}},j=async e=>{d(e),r&&await v({preferred_language:e})},N=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1],e},w=o.find(e=>e.code===c),C=(null==w?void 0:w.rtl)||!1;return(0,s.jsx)(i.Provider,{value:{currentLanguage:c,setCurrentLanguage:j,languages:o,loading:m,userPreferences:h,updateUserPreferences:v,t:N,tWithFallback:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",s=N(e,r);return s!==e?s:t},formatPrice:(e,t)=>{let r=t||(null==h?void 0:h.currency_code)||"RUB";return n.Dp.formatCurrency(e,r,c)},formatDate:e=>{let t=(null==h?void 0:h.timezone)||"UTC";return n.Dp.formatDate(e,c,t)},formatTime:(e,t)=>{let r=(null==h?void 0:h.timezone)||"UTC",s=t||(null==h?void 0:h.time_format)||"12h";return n.Dp.formatTime(e,c,r,s)},formatRelativeTime:e=>{let t=(null==h?void 0:h.timezone)||"UTC";return n.Dp.formatRelativeTime(e,c,t)},formatNumber:(e,t)=>n.Dp.formatNumber(e,c,t),isRTL:C,isLoading:p},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useI18n must be used within an I18nProvider");return e}function d(){let{currentLanguage:e,setCurrentLanguage:t,languages:r,isRTL:s}=c();return{currentLanguage:e,setCurrentLanguage:t,languages:r,isRTL:s}}},1097:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return c}});var s=r(9659),a=r(3330),n=r(3070);let i=(0,a.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await n.OQ.auth.getSession();if(null==e?void 0:e.user){l(e.user);let t=await n.eH.getCurrentProfile();d(t)}}catch(e){console.error("Error getting initial session:",e)}finally{u(!1)}})();let{data:{subscription:e}}=n.OQ.auth.onAuthStateChange(async(e,t)=>{if(null==t?void 0:t.user){l(t.user);try{let e=await n.eH.getCurrentProfile();d(e)}catch(e){console.error("Error fetching profile:",e),d(null)}}else l(null),d(null);u(!1)});return()=>e.unsubscribe()},[]);let h=async(e,t)=>{u(!0);try{let{error:r}=await n.OQ.auth.signInWithPassword({email:e,password:t});if(r)throw r}catch(e){throw console.error("Error signing in:",e),e}finally{u(!1)}},x=async(e,t,r)=>{u(!0);try{let{error:s}=await n.OQ.auth.signUp({email:e,password:t,options:{data:r}});if(s)throw s}catch(e){throw console.error("Error signing up:",e),e}finally{u(!1)}},m=async()=>{u(!0);try{let{error:e}=await n.OQ.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}finally{u(!1)}},y=async e=>{if(!c)throw Error("No profile found");try{let t=await n.eH.updateCurrentProfile(e);d(t)}catch(e){throw console.error("Error updating profile:",e),e}};return(0,s.jsx)(i.Provider,{value:{user:r,profile:c,loading:o,signIn:h,signUp:x,signOut:m,updateProfile:y},children:t})}function c(){let e=(0,a.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},2166:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},4660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},5113:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},6735:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},6672:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]])},9722:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},3762:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1675:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]])},1943:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},9201:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(8136).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])}},function(e){e.O(0,[584,782,750,70,642,526,560],function(){return e(e.s=5371)}),_N_E=e.O()}]);