(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[831],{3607:function(e,s,t){Promise.resolve().then(t.bind(t,258))},258:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var a=t(9659),r=t(3330),l=t(1097),n=t(9584),c=t(1922),i=t(9059),d=t(3762),o=t(6353),h=t(6675),u=t(6065),x=t(7790),m=t(4317),f=t(230),j=t(6606),g=t(3070),p=t(4535);function y(){let{user:e,profile:s}=(0,l.a)(),t=(0,n.useRouter)(),[y,v]=(0,r.useState)(null),[N,w]=(0,r.useState)([]),[b,Z]=(0,r.useState)([]),[k,P]=(0,r.useState)(!0),[C,E]=(0,r.useState)({totalProducts:0,activeProducts:0,totalOrders:0,pendingOrders:0,totalRevenue:0,monthlyRevenue:0});(0,r.useEffect)(()=>{if(!e||(null==s?void 0:s.role)!=="VENDOR"){t.push("/");return}A()},[e,s,t]);let A=async()=>{try{P(!0);let s=await g.db.vendors.getByOwnerId((null==e?void 0:e.id)||"");if(v(s),s){let t=await g.db.products.getAll({vendor_id:s.id},1,10);w(t.data);let a=await g.db.orders.getAll({seller_id:null==e?void 0:e.id},1,5);Z(a.data);let r=t.data.filter(e=>"ACTIVE"===e.status).length,l=a.data.filter(e=>"PENDING"===e.status).length;E({totalProducts:t.data.length,activeProducts:r,totalOrders:a.data.length,pendingOrders:l,totalRevenue:s.total_sales||0,monthlyRevenue:0})}}catch(e){console.error("Error loading vendor data:",e)}finally{P(!1)}};return k?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:Array.from({length:4}).map((e,s)=>(0,a.jsx)("div",{className:"h-32 bg-gray-200 rounded"},s))})]})}):y?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",y.name]}),(0,a.jsx)("p",{className:"text-lg text-gray-600",children:"Manage your products and orders"})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(i.zx,{asChild:!0,children:(0,a.jsxs)(c.default,{href:"/vendor-dashboard/products/new",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add Product"]})}),(0,a.jsx)(i.zx,{variant:"outline",asChild:!0,children:(0,a.jsxs)(c.default,{href:"/vendor-dashboard/settings",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Settings"]})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-blue-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C.totalProducts})]})]})})}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(u.Z,{className:"h-6 w-6 text-green-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Products"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C.activeProducts})]})]})})}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(x.Z,{className:"h-6 w-6 text-purple-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:C.totalOrders})]})]})})}),(0,a.jsx)(i.Zb,{children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-yellow-600"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(0,p.T4)(C.totalRevenue)})]})]})})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{children:"Recent Products"}),(0,a.jsx)(i.zx,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(c.default,{href:"/vendor-dashboard/products",children:"View All"})})]})}),(0,a.jsx)(i.aY,{children:0===N.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(h.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Start by adding your first product"}),(0,a.jsx)(i.zx,{asChild:!0,children:(0,a.jsxs)(c.default,{href:"/vendor-dashboard/products/new",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add Product"]})})]}):(0,a.jsx)("div",{className:"space-y-4",children:N.slice(0,5).map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:e.photo_urls&&e.photo_urls.length>0?(0,a.jsx)("img",{src:e.photo_urls[0],alt:e.name,className:"h-12 w-12 rounded-lg object-cover"}):(0,a.jsx)("div",{className:"h-12 w-12 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-gray-400"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,p.T4)(e.price_rub)," â€¢ ",e.stock_quantity," in stock"]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.Ct,{variant:"ACTIVE"===e.status?"default":"secondary",children:e.status}),(0,a.jsx)(i.zx,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)(c.default,{href:"/vendor-dashboard/products/".concat(e.id),children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})})]})]},e.id))})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(i.ll,{children:"Recent Orders"}),(0,a.jsx)(i.zx,{variant:"outline",size:"sm",asChild:!0,children:(0,a.jsx)(c.default,{href:"/vendor-dashboard/orders",children:"View All"})})]})}),(0,a.jsx)(i.aY,{children:0===b.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(x.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders yet"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Orders will appear here when customers purchase your products"})]}):(0,a.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"h-6 w-6 text-blue-600"})})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Order #",e.id]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:(0,p.T4)(e.total_amount_rub)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i.Ct,{variant:"PENDING"===e.status?"secondary":"PAID"===e.status?"default":"DELIVERED"===e.status?"success":"destructive",children:e.status}),(0,a.jsx)(i.zx,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsx)(c.default,{href:"/vendor-dashboard/orders/".concat(e.id),children:(0,a.jsx)(f.Z,{className:"h-4 w-4"})})})]})]},e.id))})})]})]}),(0,a.jsxs)(i.Zb,{className:"mt-8",children:[(0,a.jsx)(i.Ol,{children:(0,a.jsx)(i.ll,{children:"Quick Actions"})}),(0,a.jsx)(i.aY,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)(i.zx,{asChild:!0,className:"h-20 flex-col",children:(0,a.jsxs)(c.default,{href:"/vendor-dashboard/products/new",children:[(0,a.jsx)(d.Z,{className:"h-6 w-6 mb-2"}),"Add New Product"]})}),(0,a.jsx)(i.zx,{variant:"outline",asChild:!0,className:"h-20 flex-col",children:(0,a.jsxs)(c.default,{href:"/vendor-dashboard/analytics",children:[(0,a.jsx)(j.Z,{className:"h-6 w-6 mb-2"}),"View Analytics"]})}),(0,a.jsx)(i.zx,{variant:"outline",asChild:!0,className:"h-20 flex-col",children:(0,a.jsxs)(c.default,{href:"/vendor-dashboard/settings",children:[(0,a.jsx)(o.Z,{className:"h-6 w-6 mb-2"}),"Vendor Settings"]})})]})})]})]}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Vendor Account Required"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"You need to create a vendor account to access this dashboard."}),(0,a.jsx)(i.zx,{asChild:!0,children:(0,a.jsx)(c.default,{href:"/vendor-dashboard/setup",children:"Create Vendor Account"})})]})}},1097:function(e,s,t){"use strict";t.d(s,{H:function(){return c},a:function(){return i}});var a=t(9659),r=t(3330),l=t(3070);let n=(0,r.createContext)(void 0);function c(e){let{children:s}=e,[t,c]=(0,r.useState)(null),[i,d]=(0,r.useState)(null),[o,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await l.OQ.auth.getSession();if(null==e?void 0:e.user){c(e.user);let s=await l.eH.getCurrentProfile();d(s)}}catch(e){console.error("Error getting initial session:",e)}finally{h(!1)}})();let{data:{subscription:e}}=l.OQ.auth.onAuthStateChange(async(e,s)=>{if(null==s?void 0:s.user){c(s.user);try{let e=await l.eH.getCurrentProfile();d(e)}catch(e){console.error("Error fetching profile:",e),d(null)}}else c(null),d(null);h(!1)});return()=>e.unsubscribe()},[]);let u=async(e,s)=>{h(!0);try{let{error:t}=await l.OQ.auth.signInWithPassword({email:e,password:s});if(t)throw t}catch(e){throw console.error("Error signing in:",e),e}finally{h(!1)}},x=async(e,s,t)=>{h(!0);try{let{error:a}=await l.OQ.auth.signUp({email:e,password:s,options:{data:t}});if(a)throw a}catch(e){throw console.error("Error signing up:",e),e}finally{h(!1)}},m=async()=>{h(!0);try{let{error:e}=await l.OQ.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}finally{h(!1)}},f=async e=>{if(!i)throw Error("No profile found");try{let s=await l.eH.updateCurrentProfile(e);d(s)}catch(e){throw console.error("Error updating profile:",e),e}};return(0,a.jsx)(n.Provider,{value:{user:t,profile:i,loading:o,signIn:u,signUp:x,signOut:m,updateProfile:f},children:s})}function i(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},4535:function(e,s,t){"use strict";t.d(s,{SY:function(){return i},T4:function(){return c},cn:function(){return n}});var a=t(7833),r=t(1128),l=t(2597);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}function c(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RUB";return(0,l.xG)(e,s)}function i(e){let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/1e3);if(t<60)return"Just now";let a=Math.floor(t/60);if(a<60)return"".concat(a,"m ago");let r=Math.floor(a/60);if(r<24)return"".concat(r,"h ago");let l=Math.floor(r/24);return l<7?"".concat(l,"d ago"):l<30?"".concat(Math.floor(l/7),"w ago"):l<365?"".concat(Math.floor(l/30),"mo ago"):"".concat(Math.floor(l/365),"y ago")}},6606:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},4317:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},230:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6675:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},3762:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6353:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},7790:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]])},6065:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(8136).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},9584:function(e,s,t){"use strict";var a=t(8569);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[584,782,922,750,70,642,526,560],function(){return e(e.s=3607)}),_N_E=e.O()}]);