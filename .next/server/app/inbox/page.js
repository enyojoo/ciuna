(()=>{var e={};e.id=840,e.ids=[840],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},3010:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>d,pages:()=>o,routeModule:()=>u,tree:()=>x}),t(8169),t(9642),t(2865);var a=t(9727),r=t(4975),l=t(4368),i=t.n(l),n=t(4421),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);t.d(s,c);let x=["",{children:["inbox",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8169)),"D:\\Users\\enyoc\\Documents\\Dev\\ciuna\\app\\inbox\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,9642)),"D:\\Users\\enyoc\\Documents\\Dev\\ciuna\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,2865,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Users\\enyoc\\Documents\\Dev\\ciuna\\app\\inbox\\page.tsx"],d="/inbox/page",m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/inbox/page",pathname:"/inbox",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:x}})},6991:(e,s,t)=>{Promise.resolve().then(t.bind(t,4926))},4926:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>j});var a=t(3380),r=t(9879),l=t(3019),i=t(443),n=t(8617),c=t(347),x=t(7664),o=t(7603);let d=(0,o.Z)("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),m=(0,o.Z)("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),u=(0,o.Z)("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),h=(0,o.Z)("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),p=(0,o.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);var g=t(4442),y=t(361);function j(){let{user:e}=(0,l.a)(),[s,t]=(0,r.useState)([]),[o,j]=(0,r.useState)(null),[b,v]=(0,r.useState)([]),[N,f]=(0,r.useState)(""),[w,k]=(0,r.useState)(!0),[_,q]=(0,r.useState)(""),P=async e=>{try{let{data:s}=await g.db.messages.getAll(e,1,100);v(s)}catch(e){console.error("Error loading messages:",e)}},Z=async s=>{if(s.preventDefault(),N.trim()&&o)try{await g.db.messages.create({conversation_id:o.id,sender_id:e?.id||"",content:N.trim(),message_type:"TEXT"}),f(""),P(o.id)}catch(e){console.error("Error sending message:",e)}},z=e=>null,S=s.filter(e=>!0);return w?a.jsx("div",{className:"container mx-auto px-4 py-8",children:a.jsx("div",{className:"animate-pulse space-y-4",children:Array.from({length:5}).map((e,s)=>a.jsx("div",{className:"h-20 bg-gray-200 rounded"},s))})}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Messages"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Chat with buyers and sellers"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[600px]",children:[a.jsx("div",{className:"lg:col-span-1",children:(0,a.jsxs)(i.Zb,{className:"h-full",children:[a.jsx(i.Ol,{className:"pb-4",children:(0,a.jsxs)("div",{className:"relative",children:[a.jsx(n.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search conversations...",value:_,onChange:e=>q(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})}),a.jsx(i.aY,{className:"p-0",children:0===S.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No conversations yet"}),a.jsx("p",{className:"text-gray-600",children:"Start a conversation by messaging a seller"})]}):a.jsx("div",{className:"space-y-1",children:S.map(e=>(z(e),a.jsx("div",{onClick:()=>j(e),className:`p-4 cursor-pointer hover:bg-gray-50 border-b border-gray-100 ${o?.id===e.id?"bg-blue-50":""}`,children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(i.qE,{src:void 0,fallback:"U",size:"md"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"Unknown User"}),a.jsx("p",{className:"text-xs text-gray-500",children:"No messages"})]}),a.jsx("p",{className:"text-sm text-gray-600 truncate",children:"No recent messages"})]}),a.jsx(i.Ct,{variant:"default",className:"bg-blue-500",children:"0"})]})},e.id)))})})]})}),a.jsx("div",{className:"lg:col-span-2",children:o?(0,a.jsxs)(i.Zb,{className:"h-full flex flex-col",children:[a.jsx("div",{className:"p-4 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx(i.qE,{src:void 0,fallback:"U",size:"md"}),(0,a.jsxs)("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Unknown User"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Online"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(i.zx,{variant:"ghost",size:"sm",children:a.jsx(x.Z,{className:"h-4 w-4"})}),a.jsx(i.zx,{variant:"ghost",size:"sm",children:a.jsx(d,{className:"h-4 w-4"})}),a.jsx(i.zx,{variant:"ghost",size:"sm",children:a.jsx(m,{className:"h-4 w-4"})})]})]})}),a.jsx("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:0===b.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(c.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No messages yet. Start the conversation!"})]}):b.map(s=>a.jsx("div",{className:`flex ${s.sender_id===e?.id?"justify-end":"justify-start"}`,children:(0,a.jsxs)("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.sender_id===e?.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:[a.jsx("p",{className:"text-sm",children:s.content}),a.jsx("p",{className:`text-xs mt-1 ${s.sender_id===e?.id?"text-blue-100":"text-gray-500"}`,children:(0,y.SY)(s.created_at)})]})},s.id))}),a.jsx("div",{className:"p-4 border-t border-gray-200",children:(0,a.jsxs)("form",{onSubmit:Z,className:"flex items-center space-x-2",children:[a.jsx(i.zx,{variant:"ghost",size:"sm",type:"button",children:a.jsx(u,{className:"h-4 w-4"})}),a.jsx("input",{type:"text",value:N,onChange:e=>f(e.target.value),placeholder:"Type a message...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx(i.zx,{variant:"ghost",size:"sm",type:"button",children:a.jsx(h,{className:"h-4 w-4"})}),a.jsx(i.zx,{type:"submit",disabled:!N.trim(),children:a.jsx(p,{className:"h-4 w-4"})})]})})]}):a.jsx(i.Zb,{className:"h-full flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx(c.Z,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-600",children:"Choose a conversation from the list to start chatting"})]})})})]})]})}},7664:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(7603).Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]])},8169:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(967).createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\ciuna\app\inbox\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[843,191,448],()=>t(3010));module.exports=a})();