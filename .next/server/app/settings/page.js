(()=>{var e={};e.id=938,e.ids=[938],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},5240:e=>{"use strict";e.exports=require("https")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8942:(e,s,i)=>{"use strict";i.r(s),i.d(s,{GlobalError:()=>t.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>o}),i(8672),i(9642),i(2865);var a=i(9727),n=i(4975),r=i(4368),t=i.n(r),l=i(4421),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);i.d(s,c);let o=["",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,8672)),"D:\\Users\\enyoc\\Documents\\Dev\\ciuna\\app\\settings\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,9642)),"D:\\Users\\enyoc\\Documents\\Dev\\ciuna\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,2865,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Users\\enyoc\\Documents\\Dev\\ciuna\\app\\settings\\page.tsx"],u="/settings/page",p={require:i,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/settings/page",pathname:"/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},6080:(e,s,i)=>{Promise.resolve().then(i.bind(i,2547))},2547:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>g});var a=i(3380),n=i(9879),r=i(443),t=i(8851),l=i(6348),c=i(9558);let o={ORDER_UPDATE:{label:"Order Updates",description:"Updates about your orders and purchases"},MESSAGE:{label:"Messages",description:"New messages from other users"},BOOKING_CONFIRMATION:{label:"Booking Confirmations",description:"Service booking confirmations"},DEAL_CLOSED:{label:"Deal Closed",description:"When a deal is completed"},ADMIN_ALERT:{label:"Admin Alerts",description:"Important system announcements"},PROMOTION:{label:"Promotions",description:"Special offers and promotions"},PAYMENT_RECEIVED:{label:"Payment Received",description:"When you receive payments"},PAYMENT_SENT:{label:"Payment Sent",description:"When you send payments"},SHIPPING_UPDATE:{label:"Shipping Updates",description:"Updates about shipping and delivery"},REVIEW_REQUEST:{label:"Review Requests",description:"Requests to review purchases"},LISTING_APPROVED:{label:"Listing Approved",description:"When your listings are approved"},LISTING_REJECTED:{label:"Listing Rejected",description:"When your listings are rejected"},VENDOR_APPROVED:{label:"Vendor Approved",description:"When your vendor application is approved"},VENDOR_REJECTED:{label:"Vendor Rejected",description:"When your vendor application is rejected"},SERVICE_BOOKING:{label:"Service Bookings",description:"New service booking requests"},GROUP_BUY_UPDATE:{label:"Group Buy Updates",description:"Updates about group buying opportunities"},SECURITY_ALERT:{label:"Security Alerts",description:"Important security notifications"},WELCOME:{label:"Welcome Messages",description:"Welcome and onboarding messages"},PASSWORD_RESET:{label:"Password Reset",description:"Password reset notifications"},EMAIL_VERIFICATION:{label:"Email Verification",description:"Email verification requests"}},d={EMAIL:{label:"Email",description:"Receive notifications via email"},SMS:{label:"SMS",description:"Receive notifications via text message"},PUSH:{label:"Push",description:"Receive push notifications on your device"},IN_APP:{label:"In-App",description:"Show notifications within the app"}};function u({userId:e}){let[s,i]=(0,n.useState)([]),[t,l]=(0,n.useState)(!0),[c,u]=(0,n.useState)(!1),p=(e,s,a)=>{i(i=>i.find(i=>i.type===e&&i.channel===s)?i.map(i=>i.type===e&&i.channel===s?{...i,enabled:a}:i):[...i,{type:e,channel:s,enabled:a}])},x=async()=>{u(!0);try{(await fetch("/api/user/notification-preferences",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,preferences:s.map(e=>({type:e.type,channel:e.channel,enabled:e.enabled}))})})).ok?console.log("Preferences saved successfully"):console.error("Failed to save preferences")}catch(e){console.error("Error saving preferences:",e)}finally{u(!1)}},m=(e,i)=>{let a=s.find(s=>s.type===e&&s.channel===i);return!a||a.enabled},h={"Orders & Payments":["ORDER_UPDATE","PAYMENT_RECEIVED","PAYMENT_SENT","SHIPPING_UPDATE"],"Messages & Communication":["MESSAGE","BOOKING_CONFIRMATION","SERVICE_BOOKING"],"Listings & Vendors":["LISTING_APPROVED","LISTING_REJECTED","VENDOR_APPROVED","VENDOR_REJECTED"],"Security & Account":["SECURITY_ALERT","WELCOME","PASSWORD_RESET","EMAIL_VERIFICATION"],"Promotions & Updates":["PROMOTION","ADMIN_ALERT","GROUP_BUY_UPDATE","REVIEW_REQUEST","DEAL_CLOSED"]};return t?(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Notification Settings"}),a.jsx(r.SZ,{children:"Loading your notification preferences..."})]}),a.jsx(r.aY,{children:a.jsx("div",{className:"animate-pulse space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"},s))})})]}):(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Notification Settings"}),a.jsx(r.SZ,{children:"Choose how you want to be notified about different activities on Ciuna."})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)(r.mQ,{defaultValue:"email",className:"w-full",children:[(0,a.jsxs)(r.dr,{className:"grid w-full grid-cols-4",children:[a.jsx(r.SP,{value:"email",children:"Email"}),a.jsx(r.SP,{value:"push",children:"Push"}),a.jsx(r.SP,{value:"sms",children:"SMS"}),a.jsx(r.SP,{value:"inapp",children:"In-App"})]}),Object.entries(d).map(([e,s])=>a.jsx(r.nU,{value:e.toLowerCase(),children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium",children:[s.label," Notifications"]}),a.jsx("p",{className:"text-sm text-gray-600",children:s.description})]}),Object.entries(h).map(([s,i])=>(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium text-gray-900",children:s}),a.jsx("div",{className:"space-y-3",children:i.map(s=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("div",{className:"font-medium text-sm",children:o[s].label}),a.jsx("div",{className:"text-sm text-gray-600",children:o[s].description})]}),a.jsx(r.rs,{checked:m(s,e),onCheckedChange:i=>p(s,e,i)})]},s))})]},s))]})},e))]}),a.jsx("div",{className:"flex justify-end mt-6 pt-6 border-t",children:a.jsx(r.zx,{onClick:x,disabled:c,className:"min-w-[120px]",children:c?"Saving...":"Save Changes"})})]})]})}var p=i(3019),x=i(2509),m=i(2410),h=i(3796);let j=(0,i(7603).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);function g(){let{user:e}=(0,p.a)(),{userPreferences:s,updateUserPreferences:i,isLoading:o}=(0,t.QT)(),[d,g]=(0,n.useState)(!1),[f,y]=(0,n.useState)(null),v=async e=>{try{g(!0),y(null),await i(e),y({type:"success",text:"Settings saved successfully!"})}catch(e){console.error("Error saving preferences:",e),y({type:"error",text:"Failed to save settings. Please try again."})}finally{g(!1)}},N=async e=>{await v({timezone:e})},b=async e=>{await v({date_format:e})},E=async e=>{await v({time_format:e})};return e?a.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Manage your account preferences and settings."})]}),f&&a.jsx("div",{className:`mb-6 p-4 rounded-md ${"success"===f.type?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:f.text}),(0,a.jsxs)(r.mQ,{defaultValue:"general",className:"w-full",children:[(0,a.jsxs)(r.dr,{className:"grid w-full grid-cols-4",children:[(0,a.jsxs)(r.SP,{value:"general",className:"flex items-center space-x-2",children:[a.jsx(x.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"General"})]}),(0,a.jsxs)(r.SP,{value:"language",className:"flex items-center space-x-2",children:[a.jsx(m.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Language"})]}),(0,a.jsxs)(r.SP,{value:"currency",className:"flex items-center space-x-2",children:[a.jsx(h.Z,{className:"h-4 w-4"}),a.jsx("span",{children:"Currency"})]}),(0,a.jsxs)(r.SP,{value:"notifications",className:"flex items-center space-x-2",children:[a.jsx(j,{className:"h-4 w-4"}),a.jsx("span",{children:"Notifications"})]})]}),a.jsx(r.nU,{value:"general",className:"space-y-6",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Account Information"}),a.jsx(r.SZ,{children:"Your basic account details and preferences."})]}),a.jsx(r.aY,{className:"space-y-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timezone"}),(0,a.jsxs)("select",{value:s?.timezone||"UTC",onChange:e=>N(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"UTC",children:"UTC"}),a.jsx("option",{value:"Europe/Moscow",children:"Moscow (UTC+3)"}),a.jsx("option",{value:"Europe/London",children:"London (UTC+0)"}),a.jsx("option",{value:"America/New_York",children:"New York (UTC-5)"}),a.jsx("option",{value:"America/Los_Angeles",children:"Los Angeles (UTC-8)"}),a.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (UTC+9)"}),a.jsx("option",{value:"Asia/Shanghai",children:"Shanghai (UTC+8)"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Format"}),(0,a.jsxs)("select",{value:s?.date_format||"MM/DD/YYYY",onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),a.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),a.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Format"}),(0,a.jsxs)("select",{value:s?.time_format||"12h",onChange:e=>E(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"12h",children:"12-hour (AM/PM)"}),a.jsx("option",{value:"24h",children:"24-hour"})]})]})]})})]})}),a.jsx(r.nU,{value:"language",className:"space-y-6",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Language Preferences"}),a.jsx(r.SZ,{children:"Choose your preferred language for the interface."})]}),a.jsx(r.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Language"}),a.jsx(l.Z,{variant:"inline",showFlag:!0,showNativeName:!0,className:"justify-start"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{children:"Your language preference affects:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[a.jsx("li",{children:"Interface text and labels"}),a.jsx("li",{children:"Date and time formatting"}),a.jsx("li",{children:"Number formatting"}),a.jsx("li",{children:"Currency display"})]})]})]})})]})}),a.jsx(r.nU,{value:"currency",className:"space-y-6",children:(0,a.jsxs)(r.Zb,{children:[(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Currency Preferences"}),a.jsx(r.SZ,{children:"Set your preferred currency for price display."})]}),a.jsx(r.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Currency"}),a.jsx(c.ZP,{variant:"inline",showSymbol:!0,className:"justify-start"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[a.jsx("p",{children:"Your currency preference affects:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[a.jsx("li",{children:"Price display throughout the platform"}),a.jsx("li",{children:"Payment processing"}),a.jsx("li",{children:"Financial reports and analytics"})]})]})]})})]})}),a.jsx(r.nU,{value:"notifications",className:"space-y-6",children:a.jsx(u,{userId:e.id})})]})]})}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(r.Zb,{className:"w-full max-w-md",children:(0,a.jsxs)(r.Ol,{children:[a.jsx(r.ll,{children:"Access Denied"}),a.jsx(r.SZ,{children:"Please sign in to access settings."})]})})})}},8672:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>a});let a=(0,i(967).createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\ciuna\app\settings\page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var i=e=>s(s.s=e),a=s.X(0,[843,191,448],()=>i(8942));module.exports=a})();