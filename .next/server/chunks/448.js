exports.id=448,exports.ids=[448],exports.modules={1596:(e,t,r)=>{Promise.resolve().then(r.bind(r,3890)),Promise.resolve().then(r.bind(r,1200))},5028:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,4547,23)),Promise.resolve().then(r.t.bind(r,9024,23)),Promise.resolve().then(r.t.bind(r,3777,23)),Promise.resolve().then(r.t.bind(r,7695,23)),Promise.resolve().then(r.t.bind(r,4308,23)),Promise.resolve().then(r.t.bind(r,8286,23))},3890:(e,t,r)=>{"use strict";r.d(t,{Providers:()=>d});var a=r(3380),i=r(4917),n=r(6153),o=r(5746),s=r(9879),l=r(3019),c=r(8851);function d({children:e,userId:t}){let[r]=(0,s.useState)(()=>new i.S({defaultOptions:{queries:{staleTime:6e4,retry:(e,t)=>(!t||"object"!=typeof t||!("status"in t)||"number"!=typeof t.status||!(t.status>=400)||!(t.status<500))&&e<3}}}));return(0,a.jsxs)(n.aH,{client:r,children:[a.jsx(l.H,{children:a.jsx(c.bd,{userId:t,children:e})}),a.jsx(o.t,{initialIsOpen:!1})]})}},9558:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>d});var a=r(3380),i=r(9879),n=r(443),o=r(8851),s=r(2190),l=r(3796);let c=[{code:"RUB",name:"Russian Ruble",symbol:"₽",flag:"\uD83C\uDDF7\uD83C\uDDFA"},{code:"USD",name:"US Dollar",symbol:"$",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{code:"EUR",name:"Euro",symbol:"€",flag:"\uD83C\uDDEA\uD83C\uDDFA"},{code:"GBP",name:"British Pound",symbol:"\xa3",flag:"\uD83C\uDDEC\uD83C\uDDE7"},{code:"JPY",name:"Japanese Yen",symbol:"\xa5",flag:"\uD83C\uDDEF\uD83C\uDDF5"},{code:"CNY",name:"Chinese Yuan",symbol:"\xa5",flag:"\uD83C\uDDE8\uD83C\uDDF3"},{code:"KRW",name:"South Korean Won",symbol:"₩",flag:"\uD83C\uDDF0\uD83C\uDDF7"},{code:"INR",name:"Indian Rupee",symbol:"₹",flag:"\uD83C\uDDEE\uD83C\uDDF3"},{code:"BRL",name:"Brazilian Real",symbol:"R$",flag:"\uD83C\uDDE7\uD83C\uDDF7"},{code:"CAD",name:"Canadian Dollar",symbol:"C$",flag:"\uD83C\uDDE8\uD83C\uDDE6"},{code:"AUD",name:"Australian Dollar",symbol:"A$",flag:"\uD83C\uDDE6\uD83C\uDDFA"},{code:"CHF",name:"Swiss Franc",symbol:"CHF",flag:"\uD83C\uDDE8\uD83C\uDDED"},{code:"SEK",name:"Swedish Krona",symbol:"kr",flag:"\uD83C\uDDF8\uD83C\uDDEA"},{code:"NOK",name:"Norwegian Krone",symbol:"kr",flag:"\uD83C\uDDF3\uD83C\uDDF4"},{code:"DKK",name:"Danish Krone",symbol:"kr",flag:"\uD83C\uDDE9\uD83C\uDDF0"},{code:"PLN",name:"Polish Zloty",symbol:"zł",flag:"\uD83C\uDDF5\uD83C\uDDF1"},{code:"CZK",name:"Czech Koruna",symbol:"Kč",flag:"\uD83C\uDDE8\uD83C\uDDFF"},{code:"HUF",name:"Hungarian Forint",symbol:"Ft",flag:"\uD83C\uDDED\uD83C\uDDFA"},{code:"TRY",name:"Turkish Lira",symbol:"₺",flag:"\uD83C\uDDF9\uD83C\uDDF7"},{code:"ZAR",name:"South African Rand",symbol:"R",flag:"\uD83C\uDDFF\uD83C\uDDE6"}];function d({variant:e="dropdown",showSymbol:t=!0,className:r=""}){let{userPreferences:d,updateUserPreferences:u,formatPrice:_}=(0,o.QT)(),[m,p]=(0,i.useState)(!1),f=d?.currency_code||"RUB",g=c.find(e=>e.code===f),y=async e=>{await u({currency_code:e}),p(!1)};return"inline"===e?a.jsx("div",{className:`flex flex-wrap gap-2 ${r}`,children:c.slice(0,8).map(e=>(0,a.jsxs)(n.zx,{variant:f===e.code?"default":"outline",size:"sm",onClick:()=>y(e.code),className:"flex items-center space-x-2",children:[a.jsx("span",{className:"text-lg",children:e.flag}),a.jsx("span",{children:e.code}),t&&a.jsx("span",{className:"text-sm text-gray-500",children:e.symbol}),f===e.code&&a.jsx(s.Z,{className:"h-3 w-3"})]},e.code))}):"button"===e?(0,a.jsxs)(n.zx,{variant:"outline",onClick:()=>p(!m),className:`flex items-center space-x-2 ${r}`,children:[a.jsx(l.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"text-lg",children:g?.flag||"\uD83D\uDCB1"}),a.jsx("span",{children:g?.code||"RUB"}),t&&a.jsx("span",{className:"text-sm text-gray-500",children:g?.symbol||"₽"})]}):(0,a.jsxs)(n.h_,{open:m,onOpenChange:p,children:[a.jsx(n.$F,{asChild:!0,children:(0,a.jsxs)(n.zx,{variant:"outline",className:`flex items-center space-x-2 ${r}`,children:[a.jsx(l.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"text-lg",children:g?.flag||"\uD83D\uDCB1"}),a.jsx("span",{children:g?.code||"RUB"}),t&&a.jsx("span",{className:"text-sm text-gray-500",children:g?.symbol||"₽"})]})}),a.jsx(n.AW,{align:"end",className:"w-64",children:c.map(e=>(0,a.jsxs)(n.Xi,{onClick:()=>y(e.code),className:"flex items-center justify-between cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:"text-lg",children:e.flag}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:e.code}),a.jsx("span",{className:"text-xs text-gray-500",children:e.name})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&a.jsx("span",{className:"text-sm text-gray-500",children:e.symbol}),f===e.code&&a.jsx(s.Z,{className:"h-4 w-4 text-blue-600"})]})]},e.code))})]})}},6348:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var a=r(3380),i=r(9879),n=r(443),o=r(8851),s=r(2190),l=r(2410);let c={en:"\uD83C\uDDFA\uD83C\uDDF8",ru:"\uD83C\uDDF7\uD83C\uDDFA",de:"\uD83C\uDDE9\uD83C\uDDEA",fr:"\uD83C\uDDEB\uD83C\uDDF7",es:"\uD83C\uDDEA\uD83C\uDDF8",it:"\uD83C\uDDEE\uD83C\uDDF9",pt:"\uD83C\uDDF5\uD83C\uDDF9",zh:"\uD83C\uDDE8\uD83C\uDDF3",ja:"\uD83C\uDDEF\uD83C\uDDF5",ko:"\uD83C\uDDF0\uD83C\uDDF7",ar:"\uD83C\uDDF8\uD83C\uDDE6",hi:"\uD83C\uDDEE\uD83C\uDDF3",tr:"\uD83C\uDDF9\uD83C\uDDF7",pl:"\uD83C\uDDF5\uD83C\uDDF1",nl:"\uD83C\uDDF3\uD83C\uDDF1"};function d({variant:e="dropdown",showFlag:t=!0,showNativeName:r=!0,className:d=""}){let{currentLanguage:u,setCurrentLanguage:_,languages:m,isRTL:p}=(0,o.ZK)(),[f,g]=(0,i.useState)(!1),y=m.find(e=>e.code===u),h=e=>{_(e),g(!1)};return"inline"===e?a.jsx("div",{className:`flex flex-wrap gap-2 ${d}`,children:m.map(e=>(0,a.jsxs)(n.zx,{variant:u===e.code?"default":"outline",size:"sm",onClick:()=>h(e.code),className:"flex items-center space-x-2",children:[t&&a.jsx("span",{className:"text-lg",children:c[e.code]||"\uD83C\uDF10"}),a.jsx("span",{children:r?e.native_name:e.name}),u===e.code&&a.jsx(s.Z,{className:"h-3 w-3"})]},e.code))}):"button"===e?(0,a.jsxs)(n.zx,{variant:"outline",onClick:()=>g(!f),className:`flex items-center space-x-2 ${d}`,children:[a.jsx(l.Z,{className:"h-4 w-4"}),t&&y&&a.jsx("span",{className:"text-lg",children:c[y.code]||"\uD83C\uDF10"}),a.jsx("span",{children:y?r?y.native_name:y.name:"Language"}),p&&a.jsx("span",{className:"text-xs",children:"←"})]}):(0,a.jsxs)(n.h_,{open:f,onOpenChange:g,children:[a.jsx(n.$F,{asChild:!0,children:(0,a.jsxs)(n.zx,{variant:"outline",className:`flex items-center space-x-2 ${d}`,children:[a.jsx(l.Z,{className:"h-4 w-4"}),t&&y&&a.jsx("span",{className:"text-lg",children:c[y.code]||"\uD83C\uDF10"}),a.jsx("span",{children:y?r?y.native_name:y.name:"Language"}),p&&a.jsx("span",{className:"text-xs",children:"←"})]})}),a.jsx(n.AW,{align:"end",className:"w-56",children:m.map(e=>(0,a.jsxs)(n.Xi,{onClick:()=>h(e.code),className:"flex items-center justify-between cursor-pointer",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[t&&a.jsx("span",{className:"text-lg",children:c[e.code]||"\uD83C\uDF10"}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-medium",children:r?e.native_name:e.name}),r&&e.native_name!==e.name&&a.jsx("span",{className:"text-xs text-gray-500",children:e.name})]})]}),u===e.code&&a.jsx(s.Z,{className:"h-4 w-4 text-blue-600"})]},e.code))})]})}},1200:(e,t,r)=>{"use strict";r.d(t,{Navigation:()=>C});var a=r(3380),i=r(9879),n=r(4558),o=r(6293),s=r(443),l=r(8617),c=r(3299),d=r(6397),u=r(4571),_=r(4187),m=r(9669),p=r(347),f=r(2161),g=r(2509),y=r(5166),h=r(1388),x=r(6505),v=r(8244),Z=r(130),b=r(4766),R=r(7578),w=r(3019),D=r(361),E=r(6348),N=r(9558);function C(){let[e,t]=(0,i.useState)(!1),{user:r,profile:C,signOut:I}=(0,w.a)(),j=(0,o.usePathname)(),P=[{name:"Home",href:"/",icon:null},{name:"Search",href:"/search",icon:l.Z},{name:"Listings",href:"/listings",icon:c.Z},{name:"Vendors",href:"/vendors",icon:d.Z},{name:"Services",href:"/services",icon:u.Z}],S=[{name:"Dashboard",href:"/dashboard",icon:_.Z},{name:"Orders",href:"/orders",icon:m.Z},{name:"Inbox",href:"/inbox",icon:p.Z},{name:"Favorites",href:"/favorites",icon:f.Z},{name:"Settings",href:"/settings",icon:g.Z},{name:"Payments",href:"/payments",icon:y.Z},{name:"Security",href:"/security",icon:h.Z},{name:"Privacy",href:"/privacy",icon:x.Z}],A=[{name:"Dashboard",href:"/vendor-dashboard",icon:_.Z},{name:"Products",href:"/vendor-dashboard/products",icon:c.Z},{name:"Orders",href:"/vendor-dashboard/orders",icon:m.Z}],k=[{name:"Dashboard",href:"/provider-dashboard",icon:_.Z},{name:"Services",href:"/provider-dashboard/services",icon:u.Z},{name:"Bookings",href:"/provider-dashboard/bookings",icon:v.Z}],O=e=>"/"===e?"/"===j:j.startsWith(e);return a.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)(n.default,{href:"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-sm",children:"C"})}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Ciuna"})]}),a.jsx("div",{className:"hidden md:flex items-center space-x-8",children:P.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:(0,D.cn)("flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",O(e.href)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"),children:[e.icon&&a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{children:e.name})]},e.name))}),a.jsx("div",{className:"hidden lg:flex flex-1 max-w-md mx-8",children:(0,a.jsxs)("div",{className:"relative w-full",children:[a.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search products, services...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"hidden lg:flex items-center space-x-2",children:[a.jsx(E.Z,{variant:"button",showFlag:!0,showNativeName:!1}),a.jsx(N.ZP,{variant:"button",showSymbol:!0})]}),a.jsx(s.zx,{variant:"ghost",size:"icon",className:"md:hidden",children:a.jsx(l.Z,{className:"h-5 w-5"})}),r?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"hidden md:flex items-center space-x-2",children:S.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:(0,D.cn)("flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",O(e.href)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"),children:[a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{className:"hidden lg:inline",children:e.name})]},e.name))}),C?.role==="VENDOR"&&a.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:A.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:(0,D.cn)("flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",O(e.href)?"text-green-600 bg-green-50":"text-gray-700 hover:text-green-600 hover:bg-gray-50"),children:[a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{children:e.name})]},e.name))}),C?.role==="USER"&&C?.verified_expat&&a.jsx("div",{className:"hidden lg:flex items-center space-x-2",children:k.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:(0,D.cn)("flex items-center space-x-1 px-3 py-2 rounded-md text-sm font-medium transition-colors",O(e.href)?"text-purple-600 bg-purple-50":"text-gray-700 hover:text-purple-600 hover:bg-gray-50"),children:[a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{children:e.name})]},e.name))}),a.jsx("div",{className:"relative",children:a.jsx(s.zx,{variant:"ghost",size:"icon",className:"rounded-full",children:a.jsx(s.qE,{src:C?.avatar_url||void 0,fallback:C?.email?.charAt(0)||"U",size:"sm"})})}),a.jsx(s.zx,{asChild:!0,children:a.jsx(n.default,{href:"/sell/new",children:"Sell"})})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(s.zx,{variant:"ghost",asChild:!0,children:a.jsx(n.default,{href:"/auth/signin",children:"Sign In"})}),a.jsx(s.zx,{asChild:!0,children:a.jsx(n.default,{href:"/auth/signup",children:"Sign Up"})})]}),a.jsx(s.zx,{variant:"ghost",size:"icon",className:"md:hidden",onClick:()=>t(!e),children:e?a.jsx(Z.Z,{className:"h-5 w-5"}):a.jsx(b.Z,{className:"h-5 w-5"})})]})]}),e&&a.jsx("div",{className:"md:hidden border-t border-gray-200 py-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[P.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:(0,D.cn)("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium",O(e.href)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"),onClick:()=>t(!1),children:[e.icon&&a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{children:e.name})]},e.name)),r&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:S.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:(0,D.cn)("flex items-center space-x-2 px-3 py-2 rounded-md text-sm font-medium",O(e.href)?"text-blue-600 bg-blue-50":"text-gray-700 hover:text-blue-600 hover:bg-gray-50"),onClick:()=>t(!1),children:[a.jsx(e.icon,{className:"h-4 w-4"}),a.jsx("span",{children:e.name})]},e.name))}),a.jsx("div",{className:"border-t border-gray-200 pt-2 mt-2",children:(0,a.jsxs)(s.zx,{variant:"ghost",className:"w-full justify-start",onClick:()=>{I(),t(!1)},children:[a.jsx(R.Z,{className:"h-4 w-4 mr-2"}),"Sign Out"]})})]})]})})]})})}},8851:(e,t,r)=>{"use strict";r.d(t,{QT:()=>l,ZK:()=>c,bd:()=>s});var a=r(3380),i=r(9879),n=r(4442);let o=(0,i.createContext)(void 0);function s({children:e,userId:t,defaultLanguage:r="en"}){let[s,l]=(0,i.useState)(r),[c,d]=(0,i.useState)([]),[u,_]=(0,i.useState)(null),[m,p]=(0,i.useState)(!0),[f,g]=(0,i.useState)(!1),y=async e=>{if(t)try{if(g(!0),await n.Dp.updateUserPreferences(t,e)){let e=await n.Dp.getUserPreferences(t);_(e)}}catch(e){console.error("Error updating user preferences:",e)}finally{g(!1)}},h=async e=>{l(e),t&&await y({preferred_language:e})},x=(e,t="common")=>e,v=c.find(e=>e.code===s),Z=v?.rtl||!1;return a.jsx(o.Provider,{value:{currentLanguage:s,setCurrentLanguage:h,languages:c,loading:m,userPreferences:u,updateUserPreferences:y,t:x,tWithFallback:(e,t,r="common")=>{let a=x(e,r);return a!==e?a:t},formatPrice:(e,t)=>{let r=t||u?.currency_code||"RUB";return n.Dp.formatCurrency(e,r,s)},formatDate:e=>{let t=u?.timezone||"UTC";return n.Dp.formatDate(e,s,t)},formatTime:(e,t)=>{let r=u?.timezone||"UTC",a=t||u?.time_format||"12h";return n.Dp.formatTime(e,s,r,a)},formatRelativeTime:e=>{let t=u?.timezone||"UTC";return n.Dp.formatRelativeTime(e,s,t)},formatNumber:(e,t)=>n.Dp.formatNumber(e,s,t),isRTL:Z,isLoading:f},children:e})}function l(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useI18n must be used within an I18nProvider");return e}function c(){let{currentLanguage:e,setCurrentLanguage:t,languages:r,isRTL:a}=l();return{currentLanguage:e,setCurrentLanguage:t,languages:r,isRTL:a}}},3019:(e,t,r)=>{"use strict";r.d(t,{H:()=>s,a:()=>l});var a=r(3380),i=r(9879),n=r(4442);let o=(0,i.createContext)(void 0);function s({children:e}){let[t,r]=(0,i.useState)(null),[s,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),u=async(e,t)=>{d(!0);try{let{error:r}=await n.OQ.auth.signInWithPassword({email:e,password:t});if(r)throw r}catch(e){throw console.error("Error signing in:",e),e}finally{d(!1)}},_=async(e,t,r)=>{d(!0);try{let{error:a}=await n.OQ.auth.signUp({email:e,password:t,options:{data:r}});if(a)throw a}catch(e){throw console.error("Error signing up:",e),e}finally{d(!1)}},m=async()=>{d(!0);try{let{error:e}=await n.OQ.auth.signOut();if(e)throw e}catch(e){throw console.error("Error signing out:",e),e}finally{d(!1)}},p=async e=>{if(!s)throw Error("No profile found");try{let t=await n.eH.updateCurrentProfile(e);l(t)}catch(e){throw console.error("Error updating profile:",e),e}};return a.jsx(o.Provider,{value:{user:t,profile:s,loading:c,signIn:u,signUp:_,signOut:m,updateProfile:p},children:e})}function l(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},361:(e,t,r)=>{"use strict";r.d(t,{SY:()=>l,T4:()=>s,cn:()=>o});var a=r(4382),i=r(8189),n=r(5271);function o(...e){return(0,i.m6)((0,a.W)(e))}function s(e,t="RUB"){return(0,n.xG)(e,t)}function l(e){let t=new Date(e),r=Math.floor((new Date().getTime()-t.getTime())/1e3);if(r<60)return"Just now";let a=Math.floor(r/60);if(a<60)return`${a}m ago`;let i=Math.floor(a/60);if(i<24)return`${i}h ago`;let n=Math.floor(i/24);return n<7?`${n}d ago`:n<30?`${Math.floor(n/7)}w ago`:n<365?`${Math.floor(n/30)}mo ago`:`${Math.floor(n/365)}y ago`}},4442:(e,t,r)=>{"use strict";r.d(t,{mc:()=>p,Dp:()=>u,te:()=>_,oD:()=>m,db:()=>d,eH:()=>c,OQ:()=>s});var a=r(1279);let i=process.env.NEXT_PUBLIC_SUPABASE_URL||process.env.SUPABASE_URL||"http://localhost:54321",n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||process.env.SUPABASE_ANON_KEY||"your-anon-key",o=process.env.SUPABASE_SERVICE_ROLE_KEY||"your-service-role-key",s=(0,a.eI)(i,n,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}});(0,a.eI)(i,o,{auth:{autoRefreshToken:!1,persistSession:!1}});let l={async getCurrentUser(){let{data:{user:e},error:t}=await s.auth.getUser();if(t)throw t;return e},async getCurrentSession(){let{data:{session:e},error:t}=await s.auth.getSession();if(t)throw t;return e},async signUp(e,t,r){let{data:a,error:i}=await s.auth.signUp({email:e,password:t,options:{data:r}});if(i)throw i;return a},async signIn(e,t){let{data:r,error:a}=await s.auth.signInWithPassword({email:e,password:t});if(a)throw a;return r},async signInWithOAuth(e,t){let{data:r,error:a}=await s.auth.signInWithOAuth({provider:e,options:{redirectTo:t?.redirectTo||"/auth/callback"}});if(a)throw a;return r},async signOut(){let{error:e}=await s.auth.signOut();if(e)throw e},async resetPassword(e,t){let{data:r,error:a}=await s.auth.resetPasswordForEmail(e,{redirectTo:t?.redirectTo||"/auth/reset-password"});if(a)throw a;return r},async updatePassword(e){let{data:t,error:r}=await s.auth.updateUser({password:e});if(r)throw r;return t},async updateUser(e){let{data:t,error:r}=await s.auth.updateUser(e);if(r)throw r;return t},onAuthStateChange:e=>s.auth.onAuthStateChange(e)},c={async getCurrentProfile(){let e=await l.getCurrentUser();if(!e)return null;let{data:t,error:r}=await s.from("profiles").select("*").eq("id",e.id).single();if(r)throw r;return t},async getProfile(e){let{data:t,error:r}=await s.from("profiles").select("*").eq("id",e).single();if(r)throw r;return t},async createProfile(e){let{data:t,error:r}=await s.from("profiles").insert(e).select().single();if(r)throw r;return t},async updateProfile(e,t){let{data:r,error:a}=await s.from("profiles").update(t).eq("id",e).select().single();if(a)throw a;return r},async updateCurrentProfile(e){let t=await l.getCurrentUser();if(!t)throw Error("Not authenticated");return this.updateProfile(t.id,e)},async searchProfiles(e,t){let r=s.from("profiles").select("*").or(`email.ilike.%${e}%,city.ilike.%${e}%,country_of_origin.ilike.%${e}%`);t?.role&&(r=r.eq("role",t.role)),t?.city&&(r=r.eq("city",t.city)),t?.verified_expat!==void 0&&(r=r.eq("verified_expat",t.verified_expat));let{data:a,error:i}=await r;if(i)throw i;return a}},d={categories:{async getAll(){let{data:e,error:t}=await s.from("categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(t)throw t;return e},async getById(e){let{data:t,error:r}=await s.from("categories").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("categories").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("categories").update(t).eq("id",e).select().single();if(a)throw a;return r}},listings:{async getAll(e,t=1,r=20){let a=s.from("listings").select("*",{count:"exact"});e?.category_id&&(a=a.eq("category_id",e.category_id)),e?.city&&(a=a.eq("city",e.city)),e?.district&&(a=a.eq("district",e.district)),e?.min_price&&(a=a.gte("price_rub",e.min_price)),e?.max_price&&(a=a.lte("price_rub",e.max_price)),e?.condition&&(a=a.eq("condition",e.condition)),e?.status&&(a=a.eq("status",e.status)),e?.search&&(a=a.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e?.tags&&e.tags.length>0&&(a=a.overlaps("tags",e.tags));let{data:i,error:n,count:o}=await a.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(n)throw n;return{data:i,total:o||0}},async getById(e){let{data:t,error:r}=await s.from("listings").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("listings").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("listings").update(t).eq("id",e).select().single();if(a)throw a;return r},async delete(e){let{error:t}=await s.from("listings").delete().eq("id",e);if(t)throw t}},vendors:{async getAll(e,t=1,r=20){let a=s.from("vendors").select("*",{count:"exact"}).eq("status","ACTIVE");e?.type&&(a=a.eq("type",e.type)),e?.city&&(a=a.eq("city",e.city)),e?.verified!==void 0&&(a=a.eq("verified",e.verified));let{data:i,error:n,count:o}=await a.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(n)throw n;return{data:i,total:o||0}},async getById(e){let{data:t,error:r}=await s.from("vendors").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("vendors").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("vendors").update(t).eq("id",e).select().single();if(a)throw a;return r},async getByOwnerId(e){let{data:t,error:r}=await s.from("vendors").select("*").eq("owner_id",e).single();if(r)throw r;return t}},products:{async getAll(e,t=1,r=20){let a=s.from("vendor_products").select("*",{count:"exact"}).eq("status","ACTIVE");e?.vendor_id&&(a=a.eq("vendor_id",e.vendor_id)),e?.category_id&&(a=a.eq("category_id",e.category_id)),e?.min_price&&(a=a.gte("price_rub",e.min_price)),e?.max_price&&(a=a.lte("price_rub",e.max_price)),e?.is_local_stock!==void 0&&(a=a.eq("is_local_stock",e.is_local_stock)),e?.is_dropship!==void 0&&(a=a.eq("is_dropship",e.is_dropship)),e?.search&&(a=a.or(`name.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e?.tags&&e.tags.length>0&&(a=a.overlaps("tags",e.tags));let{data:i,error:n,count:o}=await a.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(n)throw n;return{data:i,total:o||0}},async getById(e){let{data:t,error:r}=await s.from("vendor_products").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("vendor_products").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("vendor_products").update(t).eq("id",e).select().single();if(a)throw a;return r}},services:{async getAll(e,t=1,r=20){let a=s.from("services").select("*",{count:"exact"}).eq("status","ACTIVE");e?.provider_id&&(a=a.eq("provider_id",e.provider_id)),e?.category&&(a=a.eq("category",e.category)),e?.min_price&&(a=a.gte("price_rub",e.min_price)),e?.max_price&&(a=a.lte("price_rub",e.max_price)),e?.is_online!==void 0&&(a=a.eq("is_online",e.is_online)),e?.is_in_person!==void 0&&(a=a.eq("is_in_person",e.is_in_person)),e?.location&&(a=a.ilike("location",`%${e.location}%`)),e?.search&&(a=a.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e?.tags&&e.tags.length>0&&(a=a.overlaps("tags",e.tags));let{data:i,error:n,count:o}=await a.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(n)throw n;return{data:i,total:o||0}},async getById(e){let{data:t,error:r}=await s.from("services").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("services").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("services").update(t).eq("id",e).select().single();if(a)throw a;return r}},bookings:{async getAll(e,t=1,r=20){let a=s.from("service_bookings").select("*",{count:"exact"});e?.client_id&&(a=a.eq("client_id",e.client_id)),e?.service_id&&(a=a.eq("service_id",e.service_id)),e?.status&&(a=a.eq("status",e.status));let{data:i,error:n,count:o}=await a.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(n)throw n;return{data:i,total:o||0}},async getById(e){let{data:t,error:r}=await s.from("service_bookings").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("service_bookings").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("service_bookings").update(t).eq("id",e).select().single();if(a)throw a;return r}},orders:{async getAll(e,t=1,r=20){let a=s.from("orders").select("*",{count:"exact"});e?.buyer_id&&(a=a.eq("buyer_id",e.buyer_id)),e?.seller_id&&(a=a.eq("seller_id",e.seller_id)),e?.status&&(a=a.eq("status",e.status));let{data:i,error:n,count:o}=await a.order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(n)throw n;return{data:i,total:o||0}},async getById(e){let{data:t,error:r}=await s.from("orders").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("orders").insert(e).select().single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("orders").update(t).eq("id",e).select().single();if(a)throw a;return r}},conversations:{async getAll(e,t=1,r=20){let{data:a,error:i,count:n}=await s.from("conversations").select(`
          *,
          conversation_participants!inner(user_id)
        `,{count:"exact"}).eq("conversation_participants.user_id",e).order("last_message_at",{ascending:!1,nullsFirst:!1}).range((t-1)*r,t*r-1);if(i)throw i;return{data:a,total:n||0}},async getById(e){let{data:t,error:r}=await s.from("conversations").select("*").eq("id",e).single();if(r)throw r;return t},async create(e){let{data:t,error:r}=await s.from("conversations").insert(e).select().single();if(r)throw r;return t}},messages:{async getAll(e,t=1,r=50){let{data:a,error:i,count:n}=await s.from("messages").select("*",{count:"exact"}).eq("conversation_id",e).order("created_at",{ascending:!1}).range((t-1)*r,t*r-1);if(i)throw i;return{data:a,total:n||0}},async create(e){let{data:t,error:r}=await s.from("messages").insert(e).select().single();if(r)throw r;return t},async markAsRead(e){let{error:t}=await s.from("messages").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(t)throw t}},profiles:{async getAll(){let{data:e,error:t}=await s.from("profiles").select("*").order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getById(e){let{data:t,error:r}=await s.from("profiles").select("*").eq("id",e).single();if(r)throw r;return t},async update(e,t){let{data:r,error:a}=await s.from("profiles").update(t).eq("id",e).select().single();if(a)throw a;return r}},serviceProviders:{async getAll(){let{data:e,error:t}=await s.from("service_providers").select(`
          *,
          profile:profiles(*)
        `).order("created_at",{ascending:!1});if(t)throw t;return e||[]},async getById(e){let{data:t,error:r}=await s.from("service_providers").select(`
          *,
          profile:profiles(*)
        `).eq("id",e).single();if(r)throw r;return t}}};class u{static async getLanguages(){if(this.languagesCache)return this.languagesCache;try{let{data:e,error:t}=await s.from("languages").select("*").eq("is_active",!0).order("name");if(t)return console.error("Error fetching languages:",t),[];return this.languagesCache=e||[],this.languagesCache}catch(e){return console.error("Error in getLanguages:",e),[]}}static async getTranslations(e,t="common"){let r=`${e}:${t}`;if(this.translationsCache.has(r))return this.translationsCache.get(r);try{let{data:a,error:i}=await s.from("translations").select("key, value").eq("language_code",e).eq("namespace",t);if(i)return console.error("Error fetching translations:",i),new Map;let n=new Map;return(a||[]).forEach(e=>{n.set(e.key,e.value)}),this.translationsCache.set(r,n),n}catch(e){return console.error("Error in getTranslations:",e),new Map}}static async getTranslation(e,t="en",r="common"){try{let{data:a,error:i}=await s.rpc("get_translation",{p_key:e,p_language_code:t,p_namespace:r});if(i)return console.error("Error getting translation:",i),e;return a||e}catch(t){return console.error("Error in getTranslation:",t),e}}static async getLocalizedContent(e,t,r="en",a){try{let{data:i,error:n}=await s.rpc("get_localized_content",{p_content_type:e,p_content_id:t,p_language_code:r,p_field_name:a});if(n)return console.error("Error getting localized content:",n),null;return i}catch(e){return console.error("Error in getLocalizedContent:",e),null}}static async setLocalizedContent(e,t,r,a,i){try{let{data:n,error:o}=await s.rpc("set_localized_content",{p_content_type:e,p_content_id:t,p_language_code:r,p_field_name:a,p_field_value:i});if(o)return console.error("Error setting localized content:",o),null;return n}catch(e){return console.error("Error in setLocalizedContent:",e),null}}static async getUserPreferences(e){try{let{data:t,error:r}=await s.from("profiles").select("preferred_language, timezone, date_format, time_format, currency_code").eq("id",e).single();if(r)return console.error("Error getting user preferences:",r),null;return{preferred_language:t.preferred_language||"en",timezone:t.timezone||"UTC",date_format:t.date_format||"MM/DD/YYYY",time_format:t.time_format||"12h",currency_code:t.currency_code||"RUB"}}catch(e){return console.error("Error in getUserPreferences:",e),null}}static async updateUserPreferences(e,t){try{let{error:r}=await s.from("profiles").update({preferred_language:t.preferred_language,timezone:t.timezone,date_format:t.date_format,time_format:t.time_format,currency_code:t.currency_code,updated_at:new Date().toISOString()}).eq("id",e);if(r)return console.error("Error updating user preferences:",r),!1;return!0}catch(e){return console.error("Error in updateUserPreferences:",e),!1}}static clearCache(){this.translationsCache.clear(),this.languagesCache=[]}static formatDate(e,t="en",r="UTC"){let a="string"==typeof e?new Date(e):e;try{return new Intl.DateTimeFormat(t,{timeZone:r,year:"numeric",month:"long",day:"numeric"}).format(a)}catch(e){return console.error("Error formatting date:",e),a.toLocaleDateString()}}static formatTime(e,t="en",r="UTC",a="12h"){let i="string"==typeof e?new Date(e):e;try{return new Intl.DateTimeFormat(t,{timeZone:r,hour:"numeric",minute:"2-digit",hour12:"12h"===a}).format(i)}catch(e){return console.error("Error formatting time:",e),i.toLocaleTimeString()}}static formatCurrency(e,t="RUB",r="en"){try{return new Intl.NumberFormat(r,{style:"currency",currency:t}).format(e)}catch(r){return console.error("Error formatting currency:",r),`${e} ${t}`}}static formatNumber(e,t="en",r){try{return new Intl.NumberFormat(t,r).format(e)}catch(t){return console.error("Error formatting number:",t),e.toString()}}static formatRelativeTime(e,t="en",r="UTC"){let a="string"==typeof e?new Date(e):e,i=Math.floor((new Date().getTime()-a.getTime())/1e3);try{let e=new Intl.RelativeTimeFormat(t,{numeric:"auto"});if(i<60)return e.format(-i,"second");if(i<3600)return e.format(-Math.floor(i/60),"minute");if(i<86400)return e.format(-Math.floor(i/3600),"hour");if(i<2592e3)return e.format(-Math.floor(i/86400),"day");else if(i<31536e3)return e.format(-Math.floor(i/2592e3),"month");else return e.format(-Math.floor(i/31536e3),"year")}catch(e){return console.error("Error formatting relative time:",e),a.toLocaleDateString()}}}u.translationsCache=new Map,u.languagesCache=[];class _{static async getProviders(){try{let{data:e,error:t}=await s.from("payment_providers").select("*").eq("is_active",!0).order("display_name");if(t)return console.error("Error fetching payment providers:",t),[];return e||[]}catch(e){return console.error("Error in getProviders:",e),[]}}static async getPaymentMethods(e){try{let{data:t,error:r}=await s.from("payment_methods").select(`
          *,
          payment_providers (
            id,
            name,
            display_name,
            provider_type
          )
        `).eq("user_id",e).order("is_default",{ascending:!1}).order("created_at",{ascending:!1});if(r)return console.error("Error fetching payment methods:",r),[];return t||[]}catch(e){return console.error("Error in getPaymentMethods:",e),[]}}static async addPaymentMethod(e,t,r,a,i){try{let{data:n,error:o}=await s.from("payment_methods").insert({user_id:e,provider_id:t,method_type:r,provider_method_id:a,metadata:i||{}}).select("id").single();if(o)return console.error("Error adding payment method:",o),{success:!1};return{success:!0,paymentMethodId:n.id}}catch(e){return console.error("Error in addPaymentMethod:",e),{success:!1}}}static async setDefaultPaymentMethod(e,t){try{await s.from("payment_methods").update({is_default:!1}).eq("user_id",e);let{error:r}=await s.from("payment_methods").update({is_default:!0}).eq("id",t).eq("user_id",e);if(r)return console.error("Error setting default payment method:",r),!1;return!0}catch(e){return console.error("Error in setDefaultPaymentMethod:",e),!1}}static async createPayment(e,t,r,a,i,n,o){try{let{data:l,error:c}=await s.rpc("create_payment_transaction",{p_user_id:e,p_order_id:t,p_provider_id:r,p_payment_method_id:a,p_amount:i,p_currency_code:n,p_metadata:o||{}});if(c)return console.error("Error creating payment transaction:",c),{success:!1};let d=await this.processPaymentWithProvider(r,l,i,n,a,o);return{success:d.success,transactionId:l,paymentUrl:d.paymentUrl}}catch(e){return console.error("Error in createPayment:",e),{success:!1}}}static async processPaymentWithProvider(e,t,r,a,i,n){try{let{data:o,error:l}=await s.from("payment_providers").select("*").eq("id",e).single();if(l||!o)return{success:!1};switch(o.provider_type){case"YOOMONEY":return await this.processYooMoneyPayment(o,t,r,a,i,n);case"STRIPE":return await this.processStripePayment(o,t,r,a,i,n);case"CASH":return await this.processCashPayment(o,t,r,a,n);case"BANK_TRANSFER":return await this.processBankTransferPayment(o,t,r,a,n);default:return{success:!1}}}catch(e){return console.error("Error processing payment with provider:",e),{success:!1}}}static async processYooMoneyPayment(e,t,r,a,i,n){try{let e=`https://yoomoney.ru/checkout/payments/v2/show?orderId=${t}`;return await s.from("payment_transactions").update({provider_transaction_id:`ym_${t}`,provider_response:{payment_url:e,status:"pending"},status:"PROCESSING"}).eq("id",t),{success:!0,paymentUrl:e}}catch(e){return console.error("Error processing YooMoney payment:",e),{success:!1}}}static async processStripePayment(e,t,r,a,i,n){try{let e=`https://checkout.stripe.com/pay/${t}`;return await s.from("payment_transactions").update({provider_transaction_id:`pi_${t}`,provider_response:{payment_url:e,status:"requires_payment_method"},status:"PROCESSING"}).eq("id",t),{success:!0,paymentUrl:e}}catch(e){return console.error("Error processing Stripe payment:",e),{success:!1}}}static async processCashPayment(e,t,r,a,i){try{return await s.from("payment_transactions").update({provider_transaction_id:`cash_${t}`,provider_response:{status:"pending_verification",instructions:"Payment will be verified upon receipt of cash"},status:"PENDING"}).eq("id",t),{success:!0}}catch(e){return console.error("Error processing cash payment:",e),{success:!1}}}static async processBankTransferPayment(e,t,r,a,i){try{return await s.from("payment_transactions").update({provider_transaction_id:`bank_${t}`,provider_response:{status:"pending_verification",instructions:"Transfer funds to the provided bank account",bank_details:{account_number:"1234567890",routing_number:"123456789",bank_name:"Example Bank"}},status:"PENDING"}).eq("id",t),{success:!0}}catch(e){return console.error("Error processing bank transfer payment:",e),{success:!1}}}static async getTransactionStatus(e){try{let{data:t,error:r}=await s.from("payment_transactions").select("*").eq("id",e).single();if(r)return console.error("Error fetching transaction status:",r),null;return t}catch(e){return console.error("Error in getTransactionStatus:",e),null}}static async getUserTransactions(e,t=50,r=0){try{let{data:a,error:i}=await s.from("payment_transactions").select("*").eq("user_id",e).order("created_at",{ascending:!1}).range(r,r+t-1);if(i)return console.error("Error fetching user transactions:",i),[];return a||[]}catch(e){return console.error("Error in getUserTransactions:",e),[]}}static async createEscrowAccount(e,t,r,a,i,n){try{let{data:o,error:l}=await s.from("escrow_accounts").insert({order_id:e,buyer_id:t,seller_id:r,amount:a,currency_code:i,release_conditions:n||{}}).select("id").single();if(l)return console.error("Error creating escrow account:",l),{success:!1};return{success:!0,escrowAccountId:o.id}}catch(e){return console.error("Error in createEscrowAccount:",e),{success:!1}}}static async releaseEscrowFunds(e,t){try{let{error:r}=await s.from("escrow_accounts").update({status:"RELEASED",released_at:new Date().toISOString(),released_by:t}).eq("id",e);if(r)return console.error("Error releasing escrow funds:",r),!1;return!0}catch(e){return console.error("Error in releaseEscrowFunds:",e),!1}}static async getExchangeRate(e,t,r){try{let{data:a,error:i}=await s.rpc("get_exchange_rate",{p_from_currency:e,p_to_currency:t,p_date:r?.toISOString()||new Date().toISOString()});if(i)return console.error("Error getting exchange rate:",i),null;return a}catch(e){return console.error("Error in getExchangeRate:",e),null}}static async convertCurrency(e,t,r){try{if(t===r)return{success:!0,convertedAmount:e,rate:1};let a=await this.getExchangeRate(t,r);if(!a)return{success:!1};return{success:!0,convertedAmount:Math.round(e*a),rate:a}}catch(e){return console.error("Error in convertCurrency:",e),{success:!1}}}static async processWebhook(e,t,r,a,i){try{let{data:n,error:o}=await s.rpc("process_payment_webhook",{p_provider_id:e,p_webhook_id:t,p_event_type:r,p_payload:a,p_signature:i||null});if(o)return console.error("Error processing webhook:",o),{success:!1};return{success:!0,webhookId:n}}catch(e){return console.error("Error in processWebhook:",e),{success:!1}}}}class m{static async search(e,t="ALL",r=20,a=0,i={},n){try{let o=Date.now(),{data:l,error:c}=await s.rpc("search_content",{p_query:e,p_content_type:t,p_limit:r,p_offset:a,p_filters:i,p_user_id:n||null}),d=Date.now()-o;if(c)return console.error("Error searching content:",c),[];return n&&await s.from("search_queries").update({response_time_ms:d,results_count:l?.length||0}).eq("user_id",n).order("created_at",{ascending:!1}).limit(1),l||[]}catch(e){return console.error("Error in search:",e),[]}}static async getSuggestions(e,t=10){try{let{data:r,error:a}=await s.rpc("get_search_suggestions",{p_query:e,p_limit:t});if(a)return console.error("Error getting search suggestions:",a),[];return r||[]}catch(e){return console.error("Error in getSuggestions:",e),[]}}static async getFilters(){try{let{data:e,error:t}=await s.from("search_filters").select("*").eq("is_active",!0).order("sort_order");if(t)return console.error("Error fetching search filters:",t),[];return e||[]}catch(e){return console.error("Error in getFilters:",e),[]}}static async getUserPreferences(e){try{let{data:t,error:r}=await s.from("user_search_preferences").select("*").eq("user_id",e).single();if(r){if("PGRST116"===r.code)return{id:"",user_id:e,preferred_categories:[],preferred_locations:{},price_range_min:void 0,price_range_max:void 0,preferred_currency:"RUB",search_radius_km:50,notification_frequency:"DAILY",created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return console.error("Error fetching user preferences:",r),null}return t}catch(e){return console.error("Error in getUserPreferences:",e),null}}static async updateUserPreferences(e,t){try{let{error:r}=await s.from("user_search_preferences").upsert({user_id:e,...t,updated_at:new Date().toISOString()});if(r)return console.error("Error updating user preferences:",r),!1;return!0}catch(e){return console.error("Error in updateUserPreferences:",e),!1}}static async getRecommendations(e,t,r=10){try{let a=s.from("search_recommendations").select("*").eq("is_active",!0).order("score",{ascending:!1}).limit(r);a=e?a.or(`user_id.eq.${e},user_id.is.null`):a.is("user_id",null),t&&(a=a.eq("recommendation_type",t));let{data:i,error:n}=await a;if(n)return console.error("Error fetching recommendations:",n),[];return i||[]}catch(e){return console.error("Error in getRecommendations:",e),[]}}static async trackClick(e,t,r){try{let{error:a}=await s.from("search_queries").update({clicked_result_id:t,clicked_result_type:r}).eq("id",e);if(a)return console.error("Error tracking click:",a),!1;return!0}catch(e){return console.error("Error in trackClick:",e),!1}}static async getAnalytics(e,t,r){try{let a=s.from("search_analytics").select("*").gte("date",e).lte("date",t).order("date",{ascending:!1});r&&(a=a.eq("query_text",r));let{data:i,error:n}=await a;if(n)return console.error("Error fetching search analytics:",n),[];return i||[]}catch(e){return console.error("Error in getAnalytics:",e),[]}}static async getTrendingSearches(e=10){try{let{data:t,error:r}=await s.from("search_suggestions").select("*").eq("is_active",!0).eq("suggestion_type","TRENDING").order("popularity_score",{ascending:!1}).limit(e);if(r)return console.error("Error fetching trending searches:",r),[];return t?.map(e=>({suggestion:e.suggestion_text,type:e.suggestion_type,score:e.popularity_score}))||[]}catch(e){return console.error("Error in getTrendingSearches:",e),[]}}static async getPopularSearches(e=10){try{let{data:t,error:r}=await s.from("search_suggestions").select("*").eq("is_active",!0).eq("suggestion_type","POPULAR").order("click_count",{ascending:!1}).limit(e);if(r)return console.error("Error fetching popular searches:",r),[];return t?.map(e=>({suggestion:e.suggestion_text,type:e.suggestion_type,score:e.popularity_score}))||[]}catch(e){return console.error("Error in getPopularSearches:",e),[]}}static async addSuggestion(e,t,r,a){try{let{error:i}=await s.from("search_suggestions").insert({suggestion_text:e,suggestion_type:t,category_id:r,location_data:a||{},popularity_score:0,click_count:0});if(i)return console.error("Error adding search suggestion:",i),!1;return!0}catch(e){return console.error("Error in addSuggestion:",e),!1}}static async updateSuggestionPopularity(e,t=1){try{let{error:r}=await s.from("search_suggestions").update({click_count:`click_count + ${t}`,popularity_score:`popularity_score + ${.1*t}`}).eq("suggestion_text",e);if(r)return console.error("Error updating suggestion popularity:",r),!1;return!0}catch(e){return console.error("Error in updateSuggestionPopularity:",e),!1}}static async getSearchHistory(e,t=20){try{let{data:r,error:a}=await s.from("search_queries").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(a)return console.error("Error fetching search history:",a),[];return r||[]}catch(e){return console.error("Error in getSearchHistory:",e),[]}}static async clearSearchHistory(e){try{let{error:t}=await s.from("search_queries").delete().eq("user_id",e);if(t)return console.error("Error clearing search history:",t),!1;return!0}catch(e){return console.error("Error in clearSearchHistory:",e),!1}}static async getPerformanceMetrics(e,t){try{let{data:r,error:a}=await s.from("search_queries").select("*").gte("created_at",e).lte("created_at",t);if(a)return console.error("Error fetching performance metrics:",a),{totalSearches:0,avgResponseTime:0,clickThroughRate:0,topQueries:[]};let i=r||[],n=i.length,o=i.reduce((e,t)=>e+(t.response_time_ms||0),0)/n,l=i.filter(e=>e.clicked_result_id).length/n,c={};i.forEach(e=>{c[e.query_text]=(c[e.query_text]||0)+1});let d=Object.entries(c).sort(([,e],[,t])=>t-e).slice(0,10).map(([e,t])=>({query:e,count:t}));return{totalSearches:n,avgResponseTime:Math.round(o),clickThroughRate:Math.round(100*l)/100,topQueries:d}}catch(e){return console.error("Error in getPerformanceMetrics:",e),{totalSearches:0,avgResponseTime:0,clickThroughRate:0,topQueries:[]}}}}class p{static async getSubscriptionPlans(){try{let{data:e,error:t}=await s.from("subscription_plans").select("*").eq("is_active",!0).order("price_monthly");if(t)return console.error("Error fetching subscription plans:",t),[];return e||[]}catch(e){return console.error("Error in getSubscriptionPlans:",e),[]}}static async getUserSubscription(e){try{let{data:t,error:r}=await s.from("user_subscriptions").select(`
          *,
          subscription_plans (
            id,
            name,
            plan_type,
            features,
            limits
          )
        `).eq("user_id",e).eq("status","ACTIVE").single();if(r){if("PGRST116"===r.code)return null;return console.error("Error fetching user subscription:",r),null}return t}catch(e){return console.error("Error in getUserSubscription:",e),null}}static async createSubscription(e,t,r,a){try{let{data:a,error:i}=await s.from("subscription_plans").select("*").eq("id",t).single();if(i||!a)return{success:!1};let n="YEARLY"===r?a.price_yearly:a.price_monthly,o=a.currency_code,l=new Date,c=new Date(l);c.setMonth(c.getMonth()+("YEARLY"===r?12:1));let{data:d,error:u}=await s.from("user_subscriptions").insert({user_id:e,plan_id:t,billing_cycle:r,price:n||a.price_monthly,currency_code:o,current_period_start:l.toISOString(),current_period_end:c.toISOString(),trial_ends_at:a.trial_days>0?new Date(l.getTime()+864e5*a.trial_days).toISOString():null,status:a.trial_days>0?"TRIAL":"ACTIVE"}).select("id").single();if(u)return console.error("Error creating subscription:",u),{success:!1};return{success:!0,subscriptionId:d.id}}catch(e){return console.error("Error in createSubscription:",e),{success:!1}}}static async cancelSubscription(e,t=!0){try{let{error:r}=await s.from("user_subscriptions").update({cancel_at_period_end:t,cancelled_at:t?null:new Date().toISOString(),status:t?"ACTIVE":"CANCELLED"}).eq("user_id",e).eq("status","ACTIVE");if(r)return console.error("Error canceling subscription:",r),!1;return!0}catch(e){return console.error("Error in cancelSubscription:",e),!1}}static async createBusinessReport(e,t,r,a,i,n){try{let{data:o,error:l}=await s.rpc("create_business_report",{p_user_id:e,p_report_type:t,p_title:r,p_date_range_start:a,p_date_range_end:i,p_filters:n||{}});if(l)return console.error("Error creating business report:",l),{success:!1};return{success:!0,reportId:o}}catch(e){return console.error("Error in createBusinessReport:",e),{success:!1}}}static async getBusinessReports(e,t=20,r=0){try{let{data:a,error:i}=await s.from("business_reports").select("*").eq("user_id",e).order("created_at",{ascending:!1}).range(r,r+t-1);if(i)return console.error("Error fetching business reports:",i),[];return a||[]}catch(e){return console.error("Error in getBusinessReports:",e),[]}}static async getBusinessMetrics(e,t,r){try{let{data:a,error:i}=await s.rpc("calculate_business_metrics",{p_user_id:e,p_start_date:t,p_end_date:r});if(i)return console.error("Error calculating business metrics:",i),{};return a||{}}catch(e){return console.error("Error in getBusinessMetrics:",e),{}}}static async getInventoryItems(e,t=50,r=0){try{let{data:a,error:i}=await s.from("inventory_items").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).range(r,r+t-1);if(i)return console.error("Error fetching inventory items:",i),[];return a||[]}catch(e){return console.error("Error in getInventoryItems:",e),[]}}static async createInventoryItem(e,t){try{let{data:r,error:a}=await s.from("inventory_items").insert({user_id:e,...t}).select("id").single();if(a)return console.error("Error creating inventory item:",a),{success:!1};return{success:!0,itemId:r.id}}catch(e){return console.error("Error in createInventoryItem:",e),{success:!1}}}static async updateInventoryQuantity(e,t,r,a,i,n,o){try{let{data:l,error:c}=await s.rpc("update_inventory_quantity",{p_inventory_item_id:e,p_quantity_change:t,p_movement_type:r,p_reason:a||null,p_reference_id:i||null,p_reference_type:n||null,p_created_by:o||null});if(c)return console.error("Error updating inventory quantity:",c),!1;return l}catch(e){return console.error("Error in updateInventoryQuantity:",e),!1}}static async getInventoryMovements(e,t=50,r=0){try{let{data:a,error:i}=await s.from("inventory_movements").select("*").eq("inventory_item_id",e).order("created_at",{ascending:!1}).range(r,r+t-1);if(i)return console.error("Error fetching inventory movements:",i),[];return a||[]}catch(e){return console.error("Error in getInventoryMovements:",e),[]}}static async getBusinessGoals(e,t){try{let r=s.from("business_goals").select("*").eq("user_id",e).order("created_at",{ascending:!1});t&&(r=r.eq("status",t));let{data:a,error:i}=await r;if(i)return console.error("Error fetching business goals:",i),[];return a||[]}catch(e){return console.error("Error in getBusinessGoals:",e),[]}}static async createBusinessGoal(e,t){try{let{data:r,error:a}=await s.from("business_goals").insert({user_id:e,...t}).select("id").single();if(a)return console.error("Error creating business goal:",a),{success:!1};return{success:!0,goalId:r.id}}catch(e){return console.error("Error in createBusinessGoal:",e),{success:!1}}}static async updateGoalProgress(e,t){try{let{data:r,error:a}=await s.from("business_goals").select("target_value").eq("id",e).single();if(a||!r)return!1;let i=Math.min(t/r.target_value*100,100),{error:n}=await s.from("business_goals").update({current_value:t,progress_percentage:i,status:i>=100?"COMPLETED":"ACTIVE"}).eq("id",e);if(n)return console.error("Error updating goal progress:",n),!1;return!0}catch(e){return console.error("Error in updateGoalProgress:",e),!1}}static async getBusinessNotifications(e,t=!1,r=20,a=0){try{let i=s.from("business_notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).range(a,a+r-1);t&&(i=i.eq("is_read",!1));let{data:n,error:o}=await i;if(o)return console.error("Error fetching business notifications:",o),[];return n||[]}catch(e){return console.error("Error in getBusinessNotifications:",e),[]}}static async markNotificationAsRead(e){try{let{error:t}=await s.from("business_notifications").update({is_read:!0}).eq("id",e);if(t)return console.error("Error marking notification as read:",t),!1;return!0}catch(e){return console.error("Error in markNotificationAsRead:",e),!1}}static async getLowInventoryAlerts(e){try{let{data:t,error:r}=await s.from("inventory_items").select("*").eq("user_id",e).eq("is_active",!0).lte("quantity","min_quantity");if(r)return console.error("Error fetching low inventory alerts:",r),[];return t||[]}catch(e){return console.error("Error in getLowInventoryAlerts:",e),[]}}static async getBusinessDashboard(e){try{let[t,r,a,i]=await Promise.all([this.getBusinessMetrics(e,new Date(Date.now()-2592e6).toISOString().split("T")[0],new Date().toISOString().split("T")[0]),this.getBusinessGoals(e,"ACTIVE"),this.getBusinessNotifications(e,!0,5),this.getLowInventoryAlerts(e)]);return{metrics:t,goals:r,notifications:a,lowInventory:i}}catch(e){return console.error("Error in getBusinessDashboard:",e),{metrics:{},goals:[],notifications:[],lowInventory:[]}}}}},5271:(e,t,r)=>{"use strict";r.d(t,{TX:()=>S,xG:()=>A});var a=r(6516);let i=a.Km(["USER","VENDOR","COURIER","ADMIN"]),n=a.Km(["PENDING","APPROVED","REJECTED"]),o=a.Km(["NEW","LIKE_NEW","GOOD","FAIR"]),s=a.Km(["ACTIVE","PAUSED","SOLD","PENDING_REVIEW"]),l=a.Km(["PENDING","PAID","FULFILLING","DELIVERED","CANCELLED"]),c=a.Km(["HELD","RELEASED","REFUNDED"]),d=a.Km(["MOCKPAY","YOOMONEY","SBER","TINKOFF"]),u=a.Km(["AUTHORIZED","CAPTURED","CANCELLED","REFUNDED"]),_=a.Km(["CREATED","PICKED_UP","IN_TRANSIT","OUT_FOR_DELIVERY","DELIVERED","RETURNED"]),m=a.Km(["LOCAL","INTERNATIONAL"]),p=a.Km(["ACTIVE","SUSPENDED"]),f=a.Km(["ACTIVE","OUT_OF_STOCK","DISABLED"]),g=a.Km(["ACTIVE","COMPLETED","CANCELLED"]),y=a.Km(["LEGAL","FINANCIAL","PERSONAL","EVENT","HEALTHCARE"]),h=a.Km(["PENDING","CONFIRMED","COMPLETED","CANCELLED"]),x=a.Km(["ACTIVE","SUSPENDED"]),v=a.Z_().uuid();a.Z_().datetime();let Z=a.Z_().regex(/^\+?[1-9]\d{1,14}$/),b=a.Z_().email(),R=a.Rx().int().min(0),w=a.Rx().int().min(1).max(5),D=a.Ry({id:a.Z_().uuid(),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()});a.Ry({page:a.Rx().int().min(1).default(1),limit:a.Rx().int().min(1).max(100).default(20)}),a.Ry({id:a.Z_().uuid(),user_id:a.Z_().uuid(),type:a.Km(["PICKUP","DROPOFF"]),street:a.Z_(),city:a.Z_(),district:a.Z_().optional(),postal_code:a.Z_().optional(),country:a.Z_().default("RU"),coordinates:a.Ry({lat:a.Rx(),lng:a.Rx()}).optional(),is_default:a.O7().default(!1),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()});let E=a.Ry({url:a.Z_().url(),filename:a.Z_(),size:a.Rx().int().positive(),mime_type:a.Z_()}),N=a.Ry({original_text:a.Z_(),translated_text:a.Z_(),source_language:a.Z_(),target_language:a.Z_(),confidence:a.Rx().min(0).max(1).optional()});a.Ry({id:v,email:b,email_confirmed_at:a.Z_().datetime().nullable(),phone:a.Z_().nullable(),phone_confirmed_at:a.Z_().datetime().nullable(),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime(),last_sign_in_at:a.Z_().datetime().nullable(),app_metadata:a.IM(a.Yj()).default({}),user_metadata:a.IM(a.Yj()).default({}),aud:a.Z_().default("authenticated"),confirmation_sent_at:a.Z_().datetime().nullable(),recovery_sent_at:a.Z_().datetime().nullable(),email_change_sent_at:a.Z_().datetime().nullable(),new_email:a.Z_().email().nullable(),new_phone:a.Z_().nullable(),invited_at:a.Z_().datetime().nullable(),action_link:a.Z_().nullable(),email_change:a.Z_().nullable(),phone_change:a.Z_().nullable(),reauthentication_sent_at:a.Z_().datetime().nullable(),reauthentication_token:a.Z_().nullable()});let C=D.extend({email:a.Z_().email(),role:i,country_of_origin:a.Z_(),city:a.Z_(),district:a.Z_().optional(),phone:Z.optional(),verified_expat:a.O7().default(!1),verification_status:n.default("PENDING"),documents:a.IM(a.Yj()).optional(),avatar_url:a.Z_().url().optional(),bio:a.Z_().optional(),languages:a.IX(a.Z_()).default([]),preferences:a.IM(a.Yj()).default({})});C.omit({id:!0,created_at:!0,updated_at:!0}),C.partial().omit({id:!0,created_at:!0,updated_at:!0}),C.extend({auth_user:a.Ry({id:v,email:a.Z_().email(),created_at:a.Z_().datetime()})});let I=D.extend({name:a.Z_().min(1).max(100),slug:a.Z_().min(1).max(100),parent_id:a.Z_().uuid().nullable(),description:a.Z_().optional(),icon:a.Z_().optional(),sort_order:a.Rx().int().default(0),is_active:a.O7().default(!0)});I.omit({id:!0,created_at:!0,updated_at:!0}),I.partial().omit({id:!0,created_at:!0,updated_at:!0});let j=I.extend({children:a.IX(a.Yj()).optional()});a.IX(j);let P=a.Km(["USD","EUR","GBP","RUB","JPY","CAD","AUD","CHF","CNY","KRW","SGD","HKD","NZD","SEK","NOK","DKK","PLN","CZK","HUF","TRY","BRL","MXN","INR","ZAR","THB","MYR","IDR","PHP","VND","UAH"]);a.Ry({id:a.Rx(),from_currency:P,to_currency:P,rate:a.Rx().positive(),source:a.Km(["api","manual","bank"]),is_active:a.O7().default(!0),valid_from:a.Z_().datetime(),valid_until:a.Z_().datetime().nullable(),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()}),a.Ry({id:a.Z_().uuid(),user_id:a.Z_().uuid(),primary_currency:P.default("RUB"),display_currency:P.default("RUB"),auto_convert:a.O7().default(!0),exchange_rate_source:a.Km(["api","manual","bank"]).default("api"),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()}),a.Ry({amount:a.Rx().int().min(0),currency:P,original_amount:a.Rx().int().min(0).optional(),exchange_rate:a.Rx().positive().optional(),converted_at:a.Z_().datetime().optional()}),a.Ry({amount:a.Rx().int().min(0),from_currency:P,to_currency:P,date:a.Z_().datetime().optional()}),a.Ry({original_amount:a.Rx().int().min(0),converted_amount:a.Rx().int().min(0),from_currency:P,to_currency:P,exchange_rate:a.Rx().positive(),converted_at:a.Z_().datetime()});let S={USD:{symbol:"$",name:"US Dollar",decimals:2},EUR:{symbol:"€",name:"Euro",decimals:2},GBP:{symbol:"\xa3",name:"British Pound",decimals:2},RUB:{symbol:"₽",name:"Russian Ruble",decimals:2},JPY:{symbol:"\xa5",name:"Japanese Yen",decimals:0},CAD:{symbol:"C$",name:"Canadian Dollar",decimals:2},AUD:{symbol:"A$",name:"Australian Dollar",decimals:2},CHF:{symbol:"CHF",name:"Swiss Franc",decimals:2},CNY:{symbol:"\xa5",name:"Chinese Yuan",decimals:2},KRW:{symbol:"₩",name:"South Korean Won",decimals:0},SGD:{symbol:"S$",name:"Singapore Dollar",decimals:2},HKD:{symbol:"HK$",name:"Hong Kong Dollar",decimals:2},NZD:{symbol:"NZ$",name:"New Zealand Dollar",decimals:2},SEK:{symbol:"kr",name:"Swedish Krona",decimals:2},NOK:{symbol:"kr",name:"Norwegian Krone",decimals:2},DKK:{symbol:"kr",name:"Danish Krone",decimals:2},PLN:{symbol:"zł",name:"Polish Zloty",decimals:2},CZK:{symbol:"Kč",name:"Czech Koruna",decimals:2},HUF:{symbol:"Ft",name:"Hungarian Forint",decimals:2},TRY:{symbol:"₺",name:"Turkish Lira",decimals:2},BRL:{symbol:"R$",name:"Brazilian Real",decimals:2},MXN:{symbol:"$",name:"Mexican Peso",decimals:2},INR:{symbol:"₹",name:"Indian Rupee",decimals:2},ZAR:{symbol:"R",name:"South African Rand",decimals:2},THB:{symbol:"฿",name:"Thai Baht",decimals:2},MYR:{symbol:"RM",name:"Malaysian Ringgit",decimals:2},IDR:{symbol:"Rp",name:"Indonesian Rupiah",decimals:0},PHP:{symbol:"₱",name:"Philippine Peso",decimals:2},VND:{symbol:"₫",name:"Vietnamese Dong",decimals:0},UAH:{symbol:"₴",name:"Ukrainian Hryvnia",decimals:2}};function A(e,t){let r=S[t],a=new Intl.NumberFormat("en-US",{minimumFractionDigits:r.decimals,maximumFractionDigits:r.decimals}).format(e);return`${r.symbol}${a}`}let k=D.extend({seller_id:v,title:a.Z_().min(1).max(200),description:a.Z_().min(1).max(2e3),category_id:a.Z_().uuid(),price_rub:R,currency:P.default("RUB"),price_original:a.Rx().int().min(0).optional(),exchange_rate:a.Rx().positive().optional(),condition:o,city:a.Z_().min(1).max(100),district:a.Z_().optional(),photo_urls:a.IX(a.Z_().url()).max(10).default([]),status:s.default("ACTIVE"),is_negotiable:a.O7().default(!0),tags:a.IX(a.Z_()).default([]),view_count:a.Rx().int().min(0).default(0),favorite_count:a.Rx().int().min(0).default(0),expires_at:a.Z_().datetime().optional()});k.omit({id:!0,created_at:!0,updated_at:!0,view_count:!0,favorite_count:!0}),k.partial().omit({id:!0,seller_id:!0,created_at:!0,updated_at:!0,view_count:!0,favorite_count:!0});let O=k.extend({seller:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),verified_expat:a.O7()}),category:a.Ry({id:a.Z_().uuid(),name:a.Z_(),slug:a.Z_()}),photos:a.IX(E).optional()}),T=a.Ry({category_id:a.Z_().uuid().optional(),city:a.Z_().optional(),district:a.Z_().optional(),min_price:R.optional(),max_price:R.optional(),condition:o.optional(),status:s.optional(),search:a.Z_().optional(),tags:a.IX(a.Z_()).optional(),seller_id:v.optional()});a.Ry({listings:a.IX(O),total:a.Rx().int().min(0),filters:T});let q=D.extend({listing_id:a.Z_().uuid().optional(),vendor_product_id:a.Z_().uuid().optional(),service_id:a.Z_().uuid().optional(),last_message_at:a.Z_().datetime().optional(),last_message_id:a.Z_().uuid().optional(),is_archived:a.O7().default(!1)});D.extend({conversation_id:a.Z_().uuid(),user_id:v,joined_at:a.Z_().datetime(),left_at:a.Z_().datetime().optional(),is_active:a.O7().default(!0),unread_count:a.Rx().int().min(0).default(0)});let U=D.extend({conversation_id:a.Z_().uuid(),sender_id:v,content:a.Z_().min(1).max(5e3),message_type:a.Km(["TEXT","IMAGE","FILE","SYSTEM"]).default("TEXT"),file_url:a.Z_().url().optional(),file_name:a.Z_().optional(),file_size:a.Rx().int().positive().optional(),is_read:a.O7().default(!1),read_at:a.Z_().datetime().optional(),reply_to_id:a.Z_().uuid().optional(),translation:N.optional()});U.omit({id:!0,created_at:!0,updated_at:!0,is_read:!0,read_at:!0}),U.partial().omit({id:!0,conversation_id:!0,sender_id:!0,created_at:!0,updated_at:!0}),q.extend({participants:a.IX(a.Ry({id:v,user_id:v,user:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),verified_expat:a.O7()}),unread_count:a.Rx().int().min(0),is_active:a.O7()})),last_message:U.optional(),listing:a.Ry({id:a.Z_().uuid(),title:a.Z_(),price_rub:a.Rx().int().min(0),photo_urls:a.IX(a.Z_().url())}).optional(),vendor_product:a.Ry({id:a.Z_().uuid(),name:a.Z_(),price_rub:a.Rx().int().min(0),photo_urls:a.IX(a.Z_().url())}).optional(),service:a.Ry({id:a.Z_().uuid(),title:a.Z_(),price_rub:a.Rx().int().min(0)}).optional()}),U.extend({sender:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),verified_expat:a.O7()})});let F=D.extend({buyer_id:v,seller_id:v,listing_id:a.Z_().uuid().optional(),vendor_product_id:a.Z_().uuid().optional(),service_booking_id:a.Z_().uuid().optional(),escrow_status:c.default("HELD"),payment_id:a.Z_().uuid(),delivery_id:a.Z_().uuid().optional(),status:l.default("PENDING"),total_amount_rub:R,escrow_amount_rub:R,delivery_amount_rub:R.default(0),currency:P.default("RUB"),total_amount_original:a.Rx().int().min(0).optional(),exchange_rate:a.Rx().positive().optional(),notes:a.Z_().optional(),cancelled_at:a.Z_().datetime().optional(),cancelled_reason:a.Z_().optional(),completed_at:a.Z_().datetime().optional()});F.omit({id:!0,created_at:!0,updated_at:!0,cancelled_at:!0,cancelled_reason:!0,completed_at:!0}),F.partial().omit({id:!0,buyer_id:!0,seller_id:!0,created_at:!0,updated_at:!0}),F.extend({buyer:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),phone:a.Z_().optional()}),seller:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),phone:a.Z_().optional()}),listing:a.Ry({id:a.Z_().uuid(),title:a.Z_(),price_rub:a.Rx().int().min(0),photo_urls:a.IX(a.Z_().url())}).optional(),vendor_product:a.Ry({id:a.Z_().uuid(),name:a.Z_(),price_rub:a.Rx().int().min(0),photo_urls:a.IX(a.Z_().url()),vendor:a.Ry({id:a.Z_().uuid(),name:a.Z_()})}).optional(),service_booking:a.Ry({id:a.Z_().uuid(),service:a.Ry({id:a.Z_().uuid(),title:a.Z_(),price_rub:a.Rx().int().min(0)}),scheduled_at:a.Z_().datetime()}).optional(),payment:a.Ry({id:a.Z_().uuid(),provider:a.Z_(),status:a.Z_(),amount_rub:a.Rx().int().min(0)}),delivery:a.Ry({id:a.Z_().uuid(),status:a.Z_(),tracking_code:a.Z_().optional()}).optional()}),a.Ry({buyer_id:v.optional(),seller_id:v.optional(),status:l.optional(),escrow_status:c.optional(),date_from:a.Z_().datetime().optional(),date_to:a.Z_().datetime().optional()});let L=D.extend({provider:d,provider_ref:a.Z_(),amount_rub:R,status:u.default("AUTHORIZED"),currency:a.Z_().default("RUB"),description:a.Z_().optional(),metadata:a.IM(a.Yj()).default({}),failure_reason:a.Z_().optional(),processed_at:a.Z_().datetime().optional(),refunded_amount_rub:R.default(0),refunded_at:a.Z_().datetime().optional()});L.omit({id:!0,created_at:!0,updated_at:!0,processed_at:!0,refunded_amount_rub:!0,refunded_at:!0}),L.partial().omit({id:!0,created_at:!0,updated_at:!0}),L.extend({order:a.Ry({id:a.Z_().uuid(),buyer_id:a.Z_().uuid(),seller_id:a.Z_().uuid(),total_amount_rub:a.Rx().int().min(0),status:a.Z_()})}),a.Ry({id:a.Z_().uuid(),amount_rub:R,currency:a.Z_().default("RUB"),description:a.Z_().optional(),client_secret:a.Z_().optional(),status:u,metadata:a.IM(a.Yj()).default({})}),D.extend({payment_id:a.Z_().uuid(),amount_rub:R,reason:a.Z_().optional(),status:a.Km(["PENDING","SUCCEEDED","FAILED","CANCELLED"]).default("PENDING"),provider_ref:a.Z_().optional(),processed_at:a.Z_().datetime().optional(),failure_reason:a.Z_().optional()}).omit({id:!0,created_at:!0,updated_at:!0,processed_at:!0});let M=D.extend({order_id:a.Z_().uuid(),reviewer_id:v,reviewee_id:v,rating:w,comment:a.Z_().max(1e3).optional(),is_anonymous:a.O7().default(!1),helpful_count:a.Rx().int().min(0).default(0),is_verified_purchase:a.O7().default(!0)});M.omit({id:!0,created_at:!0,updated_at:!0,helpful_count:!0}),M.partial().omit({id:!0,order_id:!0,reviewer_id:!0,reviewee_id:!0,created_at:!0,updated_at:!0,helpful_count:!0});let B=M.extend({reviewer:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),verified_expat:a.O7()}),order:a.Ry({id:a.Z_().uuid(),listing:a.Ry({id:a.Z_().uuid(),title:a.Z_()}).optional(),vendor_product:a.Ry({id:a.Z_().uuid(),name:a.Z_()}).optional(),service_booking:a.Ry({id:a.Z_().uuid(),service:a.Ry({id:a.Z_().uuid(),title:a.Z_()})}).optional()})});a.Ry({total_reviews:a.Rx().int().min(0),average_rating:a.Rx().min(1).max(5),rating_distribution:a.Ry({5:a.Rx().int().min(0),4:a.Rx().int().min(0),3:a.Rx().int().min(0),2:a.Rx().int().min(0),1:a.Rx().int().min(0)}),recent_reviews:a.IX(B)}),a.Ry({reviewee_id:v.optional(),rating:w.optional(),is_verified_purchase:a.O7().optional(),date_from:a.Z_().datetime().optional(),date_to:a.Z_().datetime().optional()});let K=D.extend({order_id:a.Z_().uuid(),pickup_address_id:a.Z_().uuid(),dropoff_address_id:a.Z_().uuid(),timeslot_start:a.Z_().datetime(),timeslot_end:a.Z_().datetime(),cod:a.O7().default(!1),status:_.default("CREATED"),tracking_code:a.Z_().optional(),courier_id:a.Z_().uuid().optional(),courier_notes:a.Z_().optional(),delivery_notes:a.Z_().optional(),actual_delivery_time:a.Z_().datetime().optional(),signature_url:a.Z_().url().optional(),photo_urls:a.IX(a.Z_().url()).default([])});K.omit({id:!0,created_at:!0,updated_at:!0,actual_delivery_time:!0,signature_url:!0,photo_urls:!0}),K.partial().omit({id:!0,order_id:!0,created_at:!0,updated_at:!0}),K.extend({order:a.Ry({id:a.Z_().uuid(),buyer_id:a.Z_().uuid(),seller_id:a.Z_().uuid(),total_amount_rub:a.Rx().int().min(0)}),pickup_address:a.Ry({id:a.Z_().uuid(),street:a.Z_(),city:a.Z_(),district:a.Z_().optional(),postal_code:a.Z_().optional()}),dropoff_address:a.Ry({id:a.Z_().uuid(),street:a.Z_(),city:a.Z_(),district:a.Z_().optional(),postal_code:a.Z_().optional()}),courier:a.Ry({id:a.Z_().uuid(),email:a.Z_().email(),phone:a.Z_().optional()}).optional()}),D.extend({from_country:a.Z_().min(2).max(2),to_country:a.Z_().min(2).max(2).default("RU"),volumetric_weight_kg:a.Rx().positive(),base_cost_rub:R,duty_estimate_rub:R,total_cost_rub:R,estimated_days:a.Rx().int().positive(),carrier:a.Z_(),service_level:a.Z_(),tracking_available:a.O7().default(!0),insurance_included:a.O7().default(!1),customs_handling:a.O7().default(!0)}),a.Ry({from_country:a.Z_().min(2).max(2),to_country:a.Z_().min(2).max(2).default("RU"),weight_kg:a.Rx().positive(),dimensions:a.Ry({length_cm:a.Rx().positive(),width_cm:a.Rx().positive(),height_cm:a.Rx().positive()}),value_rub:R,contents:a.Z_(),service_level:a.Km(["ECONOMY","STANDARD","EXPRESS","OVERNIGHT"]).default("STANDARD")}),a.Ry({tracking_code:a.Z_(),status:_,current_location:a.Z_().optional(),estimated_delivery:a.Z_().datetime().optional(),events:a.IX(a.Ry({timestamp:a.Z_().datetime(),status:a.Z_(),location:a.Z_().optional(),description:a.Z_()}))}),a.Ry({order_id:a.Z_().uuid().optional(),courier_id:a.Z_().uuid().optional(),status:_.optional(),city:a.Z_().optional(),date_from:a.Z_().datetime().optional(),date_to:a.Z_().datetime().optional()});let X=D.extend({owner_id:v,name:a.Z_().min(1).max(200),description:a.Z_().min(1).max(2e3),logo_url:a.Z_().url().optional(),country:a.Z_().min(2).max(2),city:a.Z_().min(1).max(100),district:a.Z_().optional(),verified:a.O7().default(!1),type:m,status:p.default("ACTIVE"),business_license:a.Z_().optional(),tax_id:a.Z_().optional(),bank_details:a.IM(a.Yj()).optional(),contact_email:a.Z_().email().optional(),contact_phone:a.Z_().optional(),website:a.Z_().url().optional(),social_links:a.IM(a.Z_().url()).default({}),rating:a.Rx().min(0).max(5).default(0),review_count:a.Rx().int().min(0).default(0),total_sales:a.Rx().int().min(0).default(0),commission_rate:a.Rx().min(0).max(1).default(.1)});X.omit({id:!0,created_at:!0,updated_at:!0,rating:!0,review_count:!0,total_sales:!0}),X.partial().omit({id:!0,owner_id:!0,created_at:!0,updated_at:!0,rating:!0,review_count:!0,total_sales:!0}),X.extend({owner:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),verified_expat:a.O7()})}),D.extend({vendor_id:a.Z_().uuid(),status:a.Km(["PENDING","APPROVED","REJECTED"]).default("PENDING"),documents:a.IX(a.Ry({type:a.Z_(),url:a.Z_().url(),filename:a.Z_()})),admin_notes:a.Z_().optional(),verified_at:a.Z_().datetime().optional(),verified_by:a.Z_().uuid().optional()}),a.Ry({total_products:a.Rx().int().min(0),active_products:a.Rx().int().min(0),total_orders:a.Rx().int().min(0),pending_orders:a.Rx().int().min(0),total_revenue:a.Rx().int().min(0),monthly_revenue:a.Rx().int().min(0),average_rating:a.Rx().min(0).max(5),total_reviews:a.Rx().int().min(0)}),a.Ry({type:m.optional(),status:p.optional(),country:a.Z_().optional(),city:a.Z_().optional(),verified:a.O7().optional(),min_rating:a.Rx().min(0).max(5).optional(),search:a.Z_().optional()});let Y=D.extend({vendor_id:a.Z_().uuid(),name:a.Z_().min(1).max(200),description:a.Z_().min(1).max(5e3),category_id:a.Z_().uuid(),price_rub:R,stock_quantity:a.Rx().int().min(0).default(0),photo_urls:a.IX(a.Z_().url()).max(20).default([]),is_local_stock:a.O7().default(!0),is_dropship:a.O7().default(!1),status:f.default("ACTIVE"),sku:a.Z_().optional(),weight_kg:a.Rx().positive().optional(),dimensions:a.Ry({length_cm:a.Rx().positive(),width_cm:a.Rx().positive(),height_cm:a.Rx().positive()}).optional(),tags:a.IX(a.Z_()).default([]),specifications:a.IM(a.Yj()).default({}),shipping_info:a.Ry({free_shipping_threshold:R.optional(),shipping_cost_rub:R.optional(),estimated_days:a.Rx().int().positive().optional(),countries:a.IX(a.Z_()).default(["RU"])}).optional(),seo_title:a.Z_().optional(),seo_description:a.Z_().optional(),view_count:a.Rx().int().min(0).default(0),favorite_count:a.Rx().int().min(0).default(0),sales_count:a.Rx().int().min(0).default(0)});Y.omit({id:!0,created_at:!0,updated_at:!0,view_count:!0,favorite_count:!0,sales_count:!0}),Y.partial().omit({id:!0,vendor_id:!0,created_at:!0,updated_at:!0,view_count:!0,favorite_count:!0,sales_count:!0});let $=Y.extend({vendor:a.Ry({id:a.Z_().uuid(),name:a.Z_(),country:a.Z_(),city:a.Z_(),verified:a.O7(),rating:a.Rx().min(0).max(5),review_count:a.Rx().int().min(0)}),category:a.Ry({id:a.Z_().uuid(),name:a.Z_(),slug:a.Z_()}),photos:a.IX(E).optional(),reviews:a.Ry({average_rating:a.Rx().min(0).max(5),total_count:a.Rx().int().min(0)}).optional()}),G=a.Ry({vendor_id:a.Z_().uuid().optional(),category_id:a.Z_().uuid().optional(),min_price:R.optional(),max_price:R.optional(),status:f.optional(),is_local_stock:a.O7().optional(),is_dropship:a.O7().optional(),search:a.Z_().optional(),tags:a.IX(a.Z_()).optional(),min_rating:a.Rx().min(0).max(5).optional(),in_stock:a.O7().optional(),country:a.Z_().optional(),city:a.Z_().optional()});a.Ry({products:a.IX($),total:a.Rx().int().min(0),filters:G,aggregations:a.Ry({price_ranges:a.IX(a.Ry({min:a.Rx(),max:a.Rx(),count:a.Rx().int().min(0)})),categories:a.IX(a.Ry({id:a.Z_().uuid(),name:a.Z_(),count:a.Rx().int().min(0)})),vendors:a.IX(a.Ry({id:a.Z_().uuid(),name:a.Z_(),count:a.Rx().int().min(0)}))}).optional()}),D.extend({product_id:a.Z_().uuid(),name:a.Z_().min(1).max(100),sku:a.Z_().optional(),price_rub:R,stock_quantity:a.Rx().int().min(0).default(0),attributes:a.IM(a.Z_()).default({}),photo_urls:a.IX(a.Z_().url()).default([]),is_active:a.O7().default(!0)}).omit({id:!0,created_at:!0,updated_at:!0});let V=D.extend({vendor_product_id:a.Z_().uuid(),min_quantity:a.Rx().int().min(2),discount_percentage:a.Rx().min(0).max(100),expires_at:a.Z_().datetime(),status:g.default("ACTIVE"),current_quantity:a.Rx().int().min(0).default(0),max_quantity:a.Rx().int().positive().optional(),description:a.Z_().max(1e3).optional(),terms:a.Z_().max(2e3).optional(),is_featured:a.O7().default(!1),featured_until:a.Z_().datetime().optional()});V.omit({id:!0,created_at:!0,updated_at:!0,current_quantity:!0}),V.partial().omit({id:!0,vendor_product_id:!0,created_at:!0,updated_at:!0,current_quantity:!0});let z=D.extend({deal_id:a.Z_().uuid(),buyer_id:v,quantity:a.Rx().int().min(1),price_per_unit_rub:R,total_amount_rub:R,discount_amount_rub:R,status:a.Km(["PENDING","CONFIRMED","CANCELLED","REFUNDED"]).default("PENDING"),payment_id:a.Z_().uuid().optional(),order_id:a.Z_().uuid().optional(),notes:a.Z_().optional(),cancelled_at:a.Z_().datetime().optional(),cancelled_reason:a.Z_().optional()});z.omit({id:!0,created_at:!0,updated_at:!0,cancelled_at:!0,cancelled_reason:!0}),z.partial().omit({id:!0,deal_id:!0,buyer_id:!0,created_at:!0,updated_at:!0,cancelled_at:!0,cancelled_reason:!0}),V.extend({vendor_product:a.Ry({id:a.Z_().uuid(),name:a.Z_(),description:a.Z_(),price_rub:a.Rx().int().min(0),photo_urls:a.IX(a.Z_().url()),vendor:a.Ry({id:a.Z_().uuid(),name:a.Z_(),country:a.Z_(),city:a.Z_(),verified:a.O7()})}),orders:a.IX(a.Ry({id:a.Z_().uuid(),buyer_id:a.Z_().uuid(),quantity:a.Rx().int().min(1),total_amount_rub:a.Rx().int().min(0),status:a.Z_(),created_at:a.Z_().datetime()})),participants:a.IX(a.Ry({id:a.Z_().uuid(),buyer:a.Ry({id:a.Z_().uuid(),email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_()}),quantity:a.Rx().int().min(1),joined_at:a.Z_().datetime()}))}),z.extend({deal:a.Ry({id:a.Z_().uuid(),vendor_product_id:a.Z_().uuid(),min_quantity:a.Rx().int().min(2),discount_percentage:a.Rx().min(0).max(100),expires_at:a.Z_().datetime(),status:a.Z_(),current_quantity:a.Rx().int().min(0)}),buyer:a.Ry({id:a.Z_().uuid(),email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_()}),vendor_product:a.Ry({id:a.Z_().uuid(),name:a.Z_(),price_rub:a.Rx().int().min(0),photo_urls:a.IX(a.Z_().url())})}),a.Ry({total_deals:a.Rx().int().min(0),active_deals:a.Rx().int().min(0),completed_deals:a.Rx().int().min(0),total_orders:a.Rx().int().min(0),total_savings:a.Rx().int().min(0),average_discount:a.Rx().min(0).max(100)}),a.Ry({vendor_id:a.Z_().uuid().optional(),category_id:a.Z_().uuid().optional(),status:g.optional(),min_discount:a.Rx().min(0).max(100).optional(),max_discount:a.Rx().min(0).max(100).optional(),expires_after:a.Z_().datetime().optional(),expires_before:a.Z_().datetime().optional(),is_featured:a.O7().optional(),search:a.Z_().optional()});let H=D.extend({profile_id:v,name:a.Z_().min(1).max(200),bio:a.Z_().min(1).max(2e3),skills:a.IX(a.Z_()).default([]),credentials:a.IM(a.Yj()).default({}),verified:a.O7().default(!1),status:x.default("ACTIVE"),rating:a.Rx().min(0).max(5).default(0),review_count:a.Rx().int().min(0).default(0),total_bookings:a.Rx().int().min(0).default(0),response_time_hours:a.Rx().positive().optional(),completion_rate:a.Rx().min(0).max(1).default(1),languages:a.IX(a.Z_()).default([]),service_areas:a.IX(a.Z_()).default([]),portfolio_urls:a.IX(a.Z_().url()).default([]),social_links:a.IM(a.Z_().url()).default({}),hourly_rate_rub:R.optional(),min_project_value_rub:R.optional(),max_project_value_rub:R.optional()});H.omit({id:!0,created_at:!0,updated_at:!0,rating:!0,review_count:!0,total_bookings:!0,completion_rate:!0}),H.partial().omit({id:!0,profile_id:!0,created_at:!0,updated_at:!0,rating:!0,review_count:!0,total_bookings:!0,completion_rate:!0});let W=D.extend({provider_id:a.Z_().uuid(),title:a.Z_().min(1).max(200),description:a.Z_().min(1).max(5e3),category:y,price_rub:R,duration_minutes:a.Rx().int().positive(),available_slots:a.IM(a.Yj()).default({}),is_online:a.O7().default(!1),is_in_person:a.O7().default(!0),location:a.Z_().optional(),max_participants:a.Rx().int().positive().default(1),requirements:a.IX(a.Z_()).default([]),deliverables:a.IX(a.Z_()).default([]),cancellation_policy:a.Z_().max(1e3).optional(),status:a.Km(["ACTIVE","INACTIVE","SUSPENDED"]).default("ACTIVE"),tags:a.IX(a.Z_()).default([]),view_count:a.Rx().int().min(0).default(0),booking_count:a.Rx().int().min(0).default(0),rating:a.Rx().min(0).max(5).default(0),review_count:a.Rx().int().min(0).default(0)});W.omit({id:!0,created_at:!0,updated_at:!0,view_count:!0,booking_count:!0,rating:!0,review_count:!0}),W.partial().omit({id:!0,provider_id:!0,created_at:!0,updated_at:!0,view_count:!0,booking_count:!0,rating:!0,review_count:!0});let J=W.extend({provider:a.Ry({id:a.Z_().uuid(),name:a.Z_(),bio:a.Z_(),verified:a.O7(),rating:a.Rx().min(0).max(5),review_count:a.Rx().int().min(0),response_time_hours:a.Rx().positive().optional(),languages:a.IX(a.Z_())}),category_info:a.Ry({name:a.Z_(),description:a.Z_().optional()}),reviews:a.Ry({average_rating:a.Rx().min(0).max(5),total_count:a.Rx().int().min(0)}).optional()}),Q=a.Ry({provider_id:a.Z_().uuid().optional(),category:y.optional(),min_price:R.optional(),max_price:R.optional(),is_online:a.O7().optional(),is_in_person:a.O7().optional(),location:a.Z_().optional(),min_rating:a.Rx().min(0).max(5).optional(),search:a.Z_().optional(),tags:a.IX(a.Z_()).optional(),available_date:a.Z_().datetime().optional(),max_duration:a.Rx().int().positive().optional(),min_duration:a.Rx().int().positive().optional()});a.Ry({services:a.IX(J),total:a.Rx().int().min(0),filters:Q,aggregations:a.Ry({price_ranges:a.IX(a.Ry({min:a.Rx(),max:a.Rx(),count:a.Rx().int().min(0)})),categories:a.IX(a.Ry({name:a.Z_(),count:a.Rx().int().min(0)})),providers:a.IX(a.Ry({id:a.Z_().uuid(),name:a.Z_(),count:a.Rx().int().min(0)}))}).optional()}),D.extend({provider_id:a.Z_().uuid(),status:a.Km(["PENDING","APPROVED","REJECTED"]).default("PENDING"),documents:a.IX(a.Ry({type:a.Z_(),url:a.Z_().url(),filename:a.Z_()})),admin_notes:a.Z_().optional(),verified_at:a.Z_().datetime().optional(),verified_by:a.Z_().uuid().optional()}),a.Ry({total_services:a.Rx().int().min(0),active_services:a.Rx().int().min(0),total_bookings:a.Rx().int().min(0),pending_bookings:a.Rx().int().min(0),completed_bookings:a.Rx().int().min(0),total_revenue:a.Rx().int().min(0),monthly_revenue:a.Rx().int().min(0),average_rating:a.Rx().min(0).max(5),total_reviews:a.Rx().int().min(0),response_rate:a.Rx().min(0).max(1),completion_rate:a.Rx().min(0).max(1)}),H.extend({profile:a.Ry({id:a.Z_().uuid(),email:a.Z_().email(),role:a.Km(["USER","VENDOR","COURIER","ADMIN"]),country_of_origin:a.Z_().optional(),city:a.Z_().optional(),district:a.Z_().optional(),phone:a.Z_().optional(),verified_expat:a.O7(),verification_status:a.Km(["PENDING","APPROVED","REJECTED"]),created_at:a.Z_(),updated_at:a.Z_()})});let ee=D.extend({service_id:a.Z_().uuid(),client_id:v,scheduled_at:a.Z_().datetime(),duration_minutes:a.Rx().int().positive(),status:h.default("PENDING"),escrow_status:c.default("HELD"),total_amount_rub:R,escrow_amount_rub:R,payment_id:a.Z_().uuid().optional(),notes:a.Z_().max(1e3).optional(),requirements:a.IX(a.Z_()).default([]),deliverables:a.IX(a.Z_()).default([]),meeting_link:a.Z_().url().optional(),meeting_location:a.Z_().optional(),is_online:a.O7().default(!1),is_in_person:a.O7().default(!0),confirmed_at:a.Z_().datetime().optional(),completed_at:a.Z_().datetime().optional(),cancelled_at:a.Z_().datetime().optional(),cancelled_reason:a.Z_().optional(),rescheduled_at:a.Z_().datetime().optional(),reschedule_reason:a.Z_().optional()});ee.omit({id:!0,created_at:!0,updated_at:!0,confirmed_at:!0,completed_at:!0,cancelled_at:!0,cancelled_reason:!0,rescheduled_at:!0,reschedule_reason:!0}),ee.partial().omit({id:!0,service_id:!0,client_id:!0,created_at:!0,updated_at:!0}),ee.extend({service:a.Ry({id:a.Z_().uuid(),title:a.Z_(),description:a.Z_(),price_rub:a.Rx().int().min(0),duration_minutes:a.Rx().int().positive(),category:a.Z_(),provider:a.Ry({id:a.Z_().uuid(),name:a.Z_(),bio:a.Z_(),verified:a.O7(),rating:a.Rx().min(0).max(5),review_count:a.Rx().int().min(0)})}),client:a.Ry({id:v,email:a.Z_().email(),country_of_origin:a.Z_(),city:a.Z_(),phone:a.Z_().optional()}),payment:a.Ry({id:a.Z_().uuid(),provider:a.Z_(),status:a.Z_(),amount_rub:a.Rx().int().min(0)}).optional()}),a.Ry({service_id:a.Z_().uuid(),date:a.Z_().regex(/^\d{4}-\d{2}-\d{2}$/),available_slots:a.IX(a.Ry({start_time:a.Z_().regex(/^\d{2}:\d{2}$/),end_time:a.Z_().regex(/^\d{2}:\d{2}$/),is_available:a.O7(),price_rub:a.Rx().int().min(0).optional()}))}),a.Ry({service_id:a.Z_().uuid(),month:a.Rx().int().min(1).max(12),year:a.Rx().int().min(2020).max(2030),days:a.IX(a.Ry({date:a.Z_().regex(/^\d{4}-\d{2}-\d{2}$/),is_available:a.O7(),available_slots:a.Rx().int().min(0),booked_slots:a.Rx().int().min(0)}))}),a.Ry({client_id:v.optional(),service_id:a.Z_().uuid().optional(),provider_id:a.Z_().uuid().optional(),status:h.optional(),escrow_status:c.optional(),date_from:a.Z_().datetime().optional(),date_to:a.Z_().datetime().optional(),is_online:a.O7().optional(),is_in_person:a.O7().optional()}),a.Ry({total_bookings:a.Rx().int().min(0),pending_bookings:a.Rx().int().min(0),confirmed_bookings:a.Rx().int().min(0),completed_bookings:a.Rx().int().min(0),cancelled_bookings:a.Rx().int().min(0),total_revenue:a.Rx().int().min(0),monthly_revenue:a.Rx().int().min(0),average_booking_value:a.Rx().int().min(0),completion_rate:a.Rx().min(0).max(1),cancellation_rate:a.Rx().min(0).max(1)}),D.extend({booking_id:a.Z_().uuid(),type:a.Km(["EMAIL","SMS","PUSH"]),scheduled_for:a.Z_().datetime(),sent_at:a.Z_().datetime().optional(),status:a.Km(["PENDING","SENT","FAILED"]).default("PENDING"),template:a.Z_(),variables:a.IM(a.Yj()).default({})}),D.extend({booking_id:a.Z_().uuid(),sent_at:a.Z_().datetime(),expires_at:a.Z_().datetime(),status:a.Km(["PENDING","COMPLETED","EXPIRED"]).default("PENDING"),reminder_sent:a.O7().default(!1)});let et=a.Km(["ORDER_UPDATE","MESSAGE","BOOKING_CONFIRMATION","DEAL_CLOSED","ADMIN_ALERT","PROMOTION","PAYMENT_RECEIVED","PAYMENT_SENT","SHIPPING_UPDATE","REVIEW_REQUEST","LISTING_APPROVED","LISTING_REJECTED","VENDOR_APPROVED","VENDOR_REJECTED","SERVICE_BOOKING","GROUP_BUY_UPDATE","SECURITY_ALERT","WELCOME","PASSWORD_RESET","EMAIL_VERIFICATION"]),er=a.Km(["EMAIL","SMS","PUSH","IN_APP"]),ea=a.Km(["PENDING","SENT","FAILED","DELIVERED","READ"]);a.Ry({id:a.Z_().uuid(),recipient_id:a.Z_().uuid(),type:et,channel:er,title:a.Z_().min(1).max(255),message:a.Z_().min(1).max(1e3),data:a.IM(a.Yj()).optional(),status:ea.default("PENDING"),sent_at:a.Z_().datetime().nullable(),read_at:a.Z_().datetime().nullable(),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()}),a.Ry({profile_id:a.Z_().uuid(),email_enabled:a.O7().default(!0),push_enabled:a.O7().default(!0),sms_enabled:a.O7().default(!1),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()}),a.Ry({id:a.Rx().int().positive(),type:et,channel:er,language_code:a.Z_().length(2),subject:a.Z_().optional(),title:a.Z_().min(1).max(255),content:a.Z_().min(1),html_content:a.Z_().optional(),variables:a.IX(a.Z_()).default([]),is_active:a.O7().default(!0),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()}),a.Ry({user_id:a.Z_().uuid(),type:et,channel:er,enabled:a.O7().default(!0),created_at:a.Z_().datetime(),updated_at:a.Z_().datetime()})},443:(e,t,r)=>{"use strict";r.d(t,{qE:()=>Z,Ct:()=>v,zx:()=>_,Zb:()=>p,aY:()=>h,SZ:()=>y,Ol:()=>f,ll:()=>g,h_:()=>O,AW:()=>q,Xi:()=>U,$F:()=>T,II:()=>m,rs:()=>j,mQ:()=>R,nU:()=>E,dr:()=>w,SP:()=>D,gx:()=>C});var a=r(3380),i=r(9879),n=r.n(i),o=r(807),s=r(8800),l=r(4382),c=r(8189);function d(...e){return(0,c.m6)((0,l.W)(e))}let u=(0,s.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=n().forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...n},s)=>{let l=i?o.g7:"button";return a.jsx(l,{className:d(u({variant:t,size:r,className:e})),ref:s,...n})});_.displayName="Button";let m=n().forwardRef(({className:e,type:t,...r},i)=>a.jsx("input",{type:t,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));m.displayName="Input";let p=n().forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:d("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));p.displayName="Card";let f=n().forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:d("flex flex-col space-y-1.5 p-6",e),...t}));f.displayName="CardHeader";let g=n().forwardRef(({className:e,...t},r)=>a.jsx("h3",{ref:r,className:d("text-2xl font-semibold leading-none tracking-tight",e),...t}));g.displayName="CardTitle";let y=n().forwardRef(({className:e,...t},r)=>a.jsx("p",{ref:r,className:d("text-sm text-muted-foreground",e),...t}));y.displayName="CardDescription";let h=n().forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:d("p-6 pt-0",e),...t}));h.displayName="CardContent",n().forwardRef(({className:e,...t},r)=>a.jsx("div",{ref:r,className:d("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter";let x=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white hover:bg-yellow-600",info:"border-transparent bg-blue-500 text-white hover:bg-blue-600"}},defaultVariants:{variant:"default"}});function v({className:e,variant:t,...r}){return a.jsx("div",{className:d(x({variant:t}),e),...r})}let Z=n().forwardRef(({className:e,src:t,alt:r,fallback:i,size:n="md",...o},s)=>a.jsx("div",{ref:s,className:d("relative flex shrink-0 overflow-hidden rounded-full bg-muted",{sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-12 w-12 text-base",xl:"h-16 w-16 text-lg"}[n],e),...o,children:t?a.jsx("img",{src:t,alt:r,className:"aspect-square h-full w-full object-cover"}):a.jsx("div",{className:"flex h-full w-full items-center justify-center bg-muted text-muted-foreground",children:i||"?"})}));Z.displayName="Avatar",n().forwardRef(({className:e,size:t="md",...r},i)=>a.jsx("div",{ref:i,className:d("animate-spin rounded-full border-2 border-current border-t-transparent",{sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8"}[t],e),...r})).displayName="LoadingSpinner";var b=r(9866);let R=b.fC,w=n().forwardRef(({className:e,...t},r)=>a.jsx(b.aV,{ref:r,className:d("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));w.displayName=b.aV.displayName;let D=n().forwardRef(({className:e,...t},r)=>a.jsx(b.xz,{ref:r,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));D.displayName=b.xz.displayName;let E=n().forwardRef(({className:e,...t},r)=>a.jsx(b.VY,{ref:r,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));E.displayName=b.VY.displayName;var N=r(5271);n().forwardRef(({value:e,onValueChange:t,className:r,showSymbols:i=!0,showNames:n=!0,disabled:o=!1,...s},l)=>a.jsx("select",{ref:l,value:e,onChange:e=>t(e.target.value),disabled:o,className:d("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...s,children:["USD","EUR","GBP","RUB","JPY","CAD","AUD","CHF","CNY","KRW","SGD","HKD","NZD","SEK","NOK","DKK","PLN","CZK","HUF","TRY","BRL","MXN","INR","ZAR","THB","MYR","IDR","PHP","VND","UAH"].map(e=>{let t=N.TX[e],r=i&&n?`${t.symbol} ${e} - ${t.name}`:i?`${t.symbol} ${e}`:n?`${e} - ${t.name}`:e;return a.jsx("option",{value:e,children:r},e)})})).displayName="CurrencySelector";let C=n().forwardRef(({className:e,...t},r)=>a.jsx("textarea",{className:d("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));C.displayName="Textarea";var I=r(1841);let j=n().forwardRef(({className:e,...t},r)=>a.jsx(I.fC,{className:d("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:a.jsx(I.bU,{className:d("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));j.displayName=I.fC.displayName;var P=r(487),S=r(8119),A=r(2190),k=r(2431);let O=P.fC,T=P.xz;P.ZA,P.Uv,P.Tr,P.Ee,n().forwardRef(({className:e,inset:t,children:r,...i},n)=>(0,a.jsxs)(P.fF,{ref:n,className:d("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...i,children:[r,a.jsx(S.Z,{className:"ml-auto h-4 w-4"})]})).displayName=P.fF.displayName,n().forwardRef(({className:e,...t},r)=>a.jsx(P.tu,{ref:r,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})).displayName=P.tu.displayName;let q=n().forwardRef(({className:e,sideOffset:t=4,...r},i)=>a.jsx(P.Uv,{children:a.jsx(P.VY,{ref:i,sideOffset:t,className:d("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));q.displayName=P.VY.displayName;let U=n().forwardRef(({className:e,inset:t,...r},i)=>a.jsx(P.ck,{ref:i,className:d("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));U.displayName=P.ck.displayName,n().forwardRef(({className:e,children:t,checked:r,...i},n)=>(0,a.jsxs)(P.oC,{ref:n,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...i,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(P.wU,{children:a.jsx(A.Z,{className:"h-4 w-4"})})}),t]})).displayName=P.oC.displayName,n().forwardRef(({className:e,children:t,...r},i)=>(0,a.jsxs)(P.Rk,{ref:i,className:d("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(P.wU,{children:a.jsx(k.Z,{className:"h-2 w-2 fill-current"})})}),t]})).displayName=P.Rk.displayName,n().forwardRef(({className:e,inset:t,...r},i)=>a.jsx(P.__,{ref:i,className:d("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r})).displayName=P.__.displayName,n().forwardRef(({className:e,...t},r)=>a.jsx(P.Z0,{ref:r,className:d("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=P.Z0.displayName},9642:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>c});var a=r(9914),i=r(7255),n=r.n(i),o=r(967);let s=(0,o.createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\ciuna\app\providers.tsx#Providers`),l=(0,o.createProxy)(String.raw`D:\Users\enyoc\Documents\Dev\ciuna\components\navigation.tsx#Navigation`);r(5835);let c={title:"Ciuna - Expat Marketplace in Russia",description:"The ultimate marketplace for expats in Russia. Buy, sell, and discover products and services from fellow expats and local vendors.",keywords:["expat","marketplace","russia","moscow","st petersburg","buy","sell","services"],authors:[{name:"Ciuna Team"}],creator:"Ciuna",publisher:"Ciuna",formatDetection:{email:!1,address:!1,telephone:!1},metadataBase:new URL(process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000"),openGraph:{type:"website",locale:"ru_RU",url:process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000",title:"Ciuna - Expat Marketplace in Russia",description:"The ultimate marketplace for expats in Russia. Buy, sell, and discover products and services from fellow expats and local vendors.",siteName:"Ciuna"},twitter:{card:"summary_large_image",title:"Ciuna - Expat Marketplace in Russia",description:"The ultimate marketplace for expats in Russia. Buy, sell, and discover products and services from fellow expats and local vendors."},robots:{index:!0,follow:!0,googleBot:{index:!0,follow:!0,"max-video-preview":-1,"max-image-preview":"large","max-snippet":-1}}};function d({children:e}){return a.jsx("html",{lang:"ru",suppressHydrationWarning:!0,className:n().variable,children:a.jsx("body",{className:`${n().className} antialiased`,children:(0,a.jsxs)(s,{children:[a.jsx(l,{}),e]})})})}},5835:()=>{}};